
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wedding Admin Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        body { background: #171a21; color: #c7d5e0; font-family: sans-serif; }
        .steam-card { background: rgba(0, 0, 0, 0.4); border-radius: 4px; border: 1px solid rgba(255, 255, 255, 0.05); }
        .steam-input { background: #101822; border: 1px solid #000; color: #fff; padding: 12px; border-radius: 3px; width: 100%; outline: none; }
        .steam-label { color: #66c0f4; font-size: 11px; font-weight: 900; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; display: block; }
        .btn-steam { background: linear-gradient(to right, #47bfff, #1a44c2); color: white; padding: 12px 24px; border-radius: 3px; font-weight: bold; }
        [x-cloak] { display: none !important; }
    </style>
</head>
<body x-data="adminHub()" x-init="init()" class="min-h-screen flex flex-col md:flex-row">

    <!-- Login -->
    <div x-show="!isLoggedIn" class="fixed inset-0 z-[1000] bg-[#171a21] flex items-center justify-center">
        <div class="steam-card p-12 w-full max-w-sm space-y-6">
            <h1 class="text-center text-2xl font-bold">Terminal Access</h1>
            <input type="password" x-model="loginPass" placeholder="Password" class="steam-input text-center" @keyup.enter="tryLogin()">
            <button @click="tryLogin()" class="w-full btn-steam">Enter</button>
        </div>
    </div>

    <!-- Sidebar -->
    <aside class="w-full md:w-64 bg-[#171a21] border-r border-white/5 p-6 space-y-4">
        <h2 class="text-sky-400 font-bold uppercase tracking-widest text-xs">Admin Panel</h2>
        <nav class="space-y-2">
            <template x-for="t in tabs">
                <button @click="activeTab = t.id" class="w-full text-left p-3 rounded hover:bg-white/5 transition" :class="activeTab === t.id ? 'bg-white/10 text-white' : 'text-gray-500'" x-text="t.name"></button>
            </template>
        </nav>
        <div class="pt-10 space-y-4">
            <button @click="saveData()" class="w-full btn-steam text-xs">Save & Publish</button>
            <button @click="downloadCsv()" class="w-full text-xs border border-white/10 p-2 rounded hover:bg-white/5">Export RSVP (CSV)</button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-10 overflow-y-auto">
        <div class="max-w-4xl mx-auto space-y-12">
            
            <!-- Tab: Identity -->
            <div x-show="activeTab === 'identity'" class="space-y-8">
                <h3 class="text-3xl font-bold">Identity Entities</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="steam-card p-6 space-y-4">
                        <label class="steam-label">Groom</label>
                        <input type="text" x-model="data.groom.name" placeholder="Name" class="steam-input">
                        <input type="text" x-model="data.groom.father" placeholder="Father" class="steam-input">
                        <input type="text" x-model="data.groom.mother" placeholder="Mother" class="steam-input">
                        <select x-model="data.groom.rank" class="steam-input">
                            <option value="장남">장남</option><option value="차남">차남</option><option value="삼남">삼남</option>
                            <option value="장녀">장녀</option><option value="차녀">차녀</option><option value="삼녀">삼녀</option>
                        </select>
                        <input type="text" x-model="data.groom.phone" placeholder="Phone" class="steam-input">
                    </div>
                    <div class="steam-card p-6 space-y-4">
                        <label class="steam-label">Bride</label>
                        <input type="text" x-model="data.bride.name" placeholder="Name" class="steam-input">
                        <input type="text" x-model="data.bride.father" placeholder="Father" class="steam-input">
                        <input type="text" x-model="data.bride.mother" placeholder="Mother" class="steam-input">
                        <select x-model="data.bride.rank" class="steam-input">
                            <option value="장녀">장녀</option><option value="차녀">차녀</option><option value="삼녀">삼녀</option>
                            <option value="장남">장남</option><option value="차남">차남</option><option value="삼남">삼남</option>
                        </select>
                        <input type="text" x-model="data.bride.phone" placeholder="Phone" class="steam-input">
                    </div>
                </div>
            </div>

            <!-- Tab: RSVP List -->
            <div x-show="activeTab === 'rsvp'" class="space-y-8">
                <h3 class="text-3xl font-bold">RSVP Management</h3>
                <div class="steam-card overflow-x-auto">
                    <table class="w-full text-left text-sm">
                        <thead class="bg-white/5">
                            <tr>
                                <th class="p-4">Date</th><th class="p-4">Side</th><th class="p-4">Name</th><th class="p-4">Attend</th><th class="p-4">Meal</th><th class="p-4">Count</th>
                            </tr>
                        </thead>
                        <tbody>
                            <template x-for="r in rsvpList">
                                <tr class="border-t border-white/5">
                                    <td class="p-4" x-text="r.date"></td>
                                    <td class="p-4" x-text="r.side"></td>
                                    <td class="p-4" x-text="r.name"></td>
                                    <td class="p-4" x-text="r.attend ? 'Yes' : 'No'"></td>
                                    <td class="p-4" x-text="r.meal ? 'Yes' : 'No'"></td>
                                    <td class="p-4" x-text="r.plusOnes"></td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- More tabs (visuals, logistics etc) would follow similar patterns -->
        </div>
    </main>

    <script>
        function adminHub() {
            return {
                isLoggedIn: false,
                loginPass: '',
                activeTab: 'identity',
                tabs: [
                    { id: 'identity', name: 'Identity' },
                    { id: 'visuals', name: 'Visual Grid' },
                    { id: 'logistics', name: 'Venue & Map' },
                    { id: 'rsvp', name: 'RSVP Data' }
                ],
                data: {},
                rsvpList: [],

                init() {
                    const saved = localStorage.getItem('wedding_v2_data');
                    this.data = saved ? JSON.parse(saved) : this.getInitialState();
                    this.rsvpList = JSON.parse(localStorage.getItem('rsvp_data') || '[]');
                },

                tryLogin() {
                    if (this.loginPass === 'admin1234!') this.isLoggedIn = true;
                    else alert('Access Denied');
                },

                saveData() {
                    localStorage.setItem('wedding_v2_data', JSON.stringify(this.data));
                    alert('Saved Successfully');
                },

                downloadCsv() {
                    let csv = 'Date,Side,Name,Phone,Attend,Meal,PlusOnes\n';
                    this.rsvpList.forEach(r => {
                        csv += `${r.date},${r.side},${r.name},${r.phone},${r.attend},${r.meal},${r.plusOnes}\n`;
                    });
                    const blob = new Blob([csv], { type: 'text/csv' });
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.setAttribute('href', url);
                    a.setAttribute('download', 'join.csv');
                    a.click();
                },

                getInitialState() {
                    return {
                        mainImage: 'https://images.unsplash.com/photo-1511795409834-ef04bbd61622?q=80&w=2069',
                        overlayText: 'Wedding Invitation',
                        overlayPos: 'top',
                        mainMessage: '조현우 그리고 류하영\n\n2026년 05월 02일 토요일 PM 13시 00분\n강남 마리아쥬 스퀘어\n\n영원히 함께할\n사랑의 맹세\n같이 축복해주세요.',
                        weddingDate: '2026-05-02T13:00:00',
                        youtubeLink: 'https://youtu.be/UmdCDfXQ8wQ',
                        groom: { name: '조현우', father: '조복래', mother: '나선희', rank: '장남', phone: '010-3366-4848', accLabel: '조현우', acc: '040-086067-01-014', bank: '기업' },
                        bride: { name: '류하영', father: '류민석', mother: '고우희', rank: '장녀', phone: '010-6556-7525', accLabel: '류하영', acc: '926-54-7559-46', bank: '국민' },
                        groomParents: { fPhone: '010-9090-0824', mPhone: '010-9877-0824', fAcc: '109-08-072450', fBank: '우리', mAcc: '110-587-170868', mBank: '신한' },
                        brideParents: { fPhone: '010-5356-7558', mPhone: '010-9858-7551', fAcc: '302-5356-7558-41', fBank: '농협', mAcc: '339-06-063092', mBank: '신한' },
                        gallery: [
                            'https://images.unsplash.com/photo-1583939003579-730e3918a45a?w=1000',
                            'https://images.unsplash.com/photo-1519225421980-715cb0215aed?w=1000',
                            'https://images.unsplash.com/photo-1519741497674-611481863552?w=1000'
                        ],
                        venue: {
                            name: '마리아쥬 스퀘어',
                            address: '서울특별시 강남구 도산대로 318 SB타워 G층',
                            phone: '02-541-5007',
                            homepage: 'http://www.mariagesquare.com/',
                            guideText: '셔틀운행: 강남구청역 3번출구 셔틀 이용'
                        },
                        sections: [
                            { id: 'names', title: 'WHO WE ARE', isVisible: true, isFolded: false, order: 1 },
                            { id: 'calendar', title: 'DATE', isVisible: true, isFolded: false, order: 2 },
                            { id: 'youtube', title: 'CINEMA', isVisible: true, isFolded: true, order: 3 },
                            { id: 'gallery', title: 'GALLERY', isVisible: true, isFolded: true, order: 4 },
                            { id: 'phone', title: 'CONTACT', isVisible: true, isFolded: true, order: 5 },
                            { id: 'accounts', title: 'GIFT', isVisible: true, isFolded: true, order: 6 },
                            { id: 'location', title: 'LOCATION', isVisible: true, isFolded: false, order: 7 },
                            { id: 'guestbook', title: 'GUESTBOOK', isVisible: true, isFolded: true, order: 8 },
                            { id: 'rsvp', title: 'RSVP', isVisible: true, isFolded: false, order: 9 },
                            { id: 'share', title: 'SHARE', isVisible: true, isFolded: true, order: 10 }
                        ],
                        guestbook: []
                    };
                }
            }
        }
    </script>
</body>
</html>
