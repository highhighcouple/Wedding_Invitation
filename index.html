<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <<<<<<< HEAD <title
        x-text="data.groom && data.bride ? `${data.groom.name} ‚ô• ${data.bride.name}Ïùò Î™®Î∞îÏùº Ï≤≠Ï≤©Ïû•` : 'Î™®Î∞îÏùº Ï≤≠Ï≤©Ïû•'">
        </title>
        <script src="https://cdn.tailwindcss.com"></script>
        <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
        <link
            href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Noto+Serif+KR:wght@200;400;700&family=Nanum+Myeongjo&display=swap"
            rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
        <style>
            :root {
                --main-bg: #ffffff;
                --text-color: #333333;
                --accent: #d4af37;
            }

            body {
                font-family: 'Noto Serif KR', serif;
                background-color: var(--main-bg);
                color: var(--text-color);
                overflow-x: hidden;
                scroll-behavior: smooth;
            }

            .font-cursive {
                font-family: 'Dancing Script', cursive;
            }

            [x-cloak] {
                display: none !important;
            }

            #interactive-canvas {
                position: fixed;
                top: 0;
                left: 0;
                pointer-events: none;
                z-index: 60;
            }

            .reveal {
                opacity: 0;
                transform: translateY(30px);
                transition: all 1.2s cubic-bezier(0.22, 1, 0.36, 1);
            }

            .reveal.active {
                opacity: 1;
                transform: translateY(0);
            }

            .section-content {
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.8s ease-in-out;
            }

            .section-content.open {
                max-height: 4000px;
            }

            .intro-layer {
                background: #fff;
                z-index: 1000;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }

            .bgm-btn {
                width: 44px;
                height: 44px;
                border-radius: 50%;
                border: 1px solid #eee;
                display: flex;
                align-items: center;
                justify-content: center;
                background: white;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
                cursor: pointer;
                transition: transform 0.3s;
            }

            .bgm-btn:hover {
                transform: scale(1.1);
            }

            .btn-action {
                @apply px-4 py-2 border border-gray-100 rounded-full text-[11px] bg-white/80 backdrop-blur hover:bg-gray-50 transition-all shadow-sm;
            }

            /* Calendar Grid */
            .calendar-grid {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                gap: 0.5rem;
                text-align: center;
            }

            .day-cell {
                width: 2.5rem;
                height: 2.5rem;
                display: flex;
                items-center;
                justify-content: center;
                font-size: 0.875rem;
                border-radius: 9999px;
                transition: all 0.3s;
            }

            /* Floating Star Dust */
            .star-dust {
                position: absolute;
                background: white;
                border-radius: 50%;
                pointer-events: none;
                animation: floatUp 4s infinite linear;
            }

            @keyframes floatUp {
                0% {
                    transform: translateY(0) scale(1);
                    opacity: 0.8;
                }

                100% {
                    transform: translateY(-150px) scale(0);
                    opacity: 0;
                }
            }
        </style>
</head>

<body x-data="weddingApp()" x-init="init()" @mousemove="handleMouseMove($event)" @touchstart="handleTouchMove($event)">

    <canvas id="interactive-canvas"></canvas>

    <!-- Intro Layer -->
    <div x-show="showIntro" x-transition.opacity.duration.1000ms class="fixed inset-0 intro-layer" @click="closeIntro()"
        @wheel="closeIntro()">
        <div class="text-center space-y-10 animate__animated animate__fadeIn">
            <h2 class="font-cursive text-5xl text-gray-400">Our Special Day</h2>
            <div class="flex flex-col items-center">
                <div class="w-px h-24 bg-gradient-to-b from-gray-200 to-transparent animate-bounce"></div>
                <p class="mt-6 text-[10px] tracking-[0.6em] text-gray-400 uppercase">Scroll to Celebrate</p>
            </div>
        </div>
    </div>

    <!-- Header Navigation -->
    <header class="fixed top-0 left-0 right-0 z-50 p-6 flex justify-between items-center pointer-events-none">
        <div class="flex items-center gap-3 pointer-events-auto">
            <button @click="toggleBgm()" class="bgm-btn">
                <template x-if="!bgmPlaying"><span>‚ñ∂</span></template>
                <template x-if="bgmPlaying"><span class="animate-pulse text-rose-300">‚ô´</span></template>
            </button>
        </div>
        <div class="flex items-center gap-3 pointer-events-auto">
            <button @click="runTTS()" class="btn-action">TTS</button>
            <div class="relative" x-data="{ open: false }">
                <button @click="open = !open" class="btn-action flex items-center gap-2">
                    <span x-text="currentLang.flag"></span> <span x-text="currentLang.name"></span>
                </button>
                <div x-show="open" @click.away="open = false" x-cloak
                    class="absolute right-0 mt-3 bg-white border border-gray-100 rounded-2xl shadow-2xl p-3 w-40 space-y-1">
                    <template x-for="lang in languages">
                        <button @click="changeLang(lang); open = false"
                            class="w-full text-left px-4 py-2 text-xs hover:bg-rose-50 rounded-xl flex items-center gap-3 transition-colors">
                            <span x-text="lang.flag"></span> <span x-text="lang.name"></span>
                        </button>
                    </template>
                </div>
            </div>
        </div>
    </header>

    <main class="relative z-20" x-show="data.groom">
        <!-- Section 1: Hero -->
        <section class="h-screen relative flex items-center justify-center overflow-hidden">
            <img :src="data.mainImage"
                class="absolute inset-0 w-full h-full object-cover transition-transform duration-[30s] scale-110"
                style="filter: brightness(0.85);">
            <div class="absolute inset-0 bg-black/5"></div>
            <div class="relative z-10 text-center text-white space-y-8 px-6">
                <h1 class="font-cursive text-7xl md:text-9xl reveal animate__animated animate__fadeInDown"
                    x-text="data.overlayText"></h1>
                <div class="space-y-3 reveal" style="transition-delay: 0.6s">
                    <p class="text-xl md:text-2xl font-light tracking-[0.3em]"
                        x-text="`${data.groom.name} & ${data.bride.name}`"></p>
                    <p class="text-[10px] uppercase tracking-[0.6em] opacity-70"
                        x-text="formatDateKST(data.weddingDate)"></p>
                </div>
            </div>
        </section>

        <!-- Dynamic Content Sections -->
        <template x-for="section in sortedSections" :key="section.id">
            <div x-show="section.isVisible" class="max-w-2xl mx-auto py-24 px-8 text-center reveal">

                <div @click="section.isFolded = !section.isFolded" class="cursor-pointer mb-12 inline-block">
                    <h2 class="text-[11px] tracking-[0.5em] text-gray-300 uppercase hover:text-rose-300 transition-colors"
                        x-text="section.title"></h2>
                    <div class="w-8 h-px bg-gray-100 mx-auto mt-4"></div>
                </div>

                <div class="section-content" :class="!section.isFolded ? 'open' : ''">

                    <!-- Main Text Section -->
                    <template x-if="section.id === 'mainText'">
                        <div class="py-12 space-y-8">
                            <pre class="whitespace-pre-wrap leading-loose text-gray-500 font-light text-base md:text-lg italic tracking-wide"
                                x-text="data.mainText"></pre>
                        </div>
                    </template>

                    <!-- Profile Section -->
                    <template x-if="section.id === 'names'">
                        <div class="py-12 space-y-16">
                            <div class="grid md:grid-cols-2 gap-12 items-center">
                                <!-- Groom Side -->
                                <div class="space-y-6">
                                    <p class="text-[10px] text-rose-300 tracking-[0.4em] uppercase">The Groom</p>
                                    <h3 class="text-3xl font-bold tracking-tighter" x-text="data.groom.name"></h3>
                                    <div class="text-sm text-gray-400 space-y-1">
                                        <p><span x-text="data.groom.father"></span> ¬∑ <span
                                                x-text="data.groom.mother"></span>Ïùò <span
                                                x-text="data.groom.rank"></span></p>
                                    </div>
                                    <div class="flex justify-center gap-4 mt-6">
                                        <a :href="`tel:${data.groom.phone}`"
                                            class="w-10 h-10 flex items-center justify-center rounded-full border border-gray-100 text-gray-400 hover:text-rose-300 transition-colors shadow-sm bg-white">üìû</a>
                                    </div>
                                </div>
                                <!-- Bride Side -->
                                <div class="space-y-6">
                                    <p class="text-[10px] text-rose-300 tracking-[0.4em] uppercase">The Bride</p>
                                    <h3 class="text-3xl font-bold tracking-tighter" x-text="data.bride.name"></h3>
                                    <div class="text-sm text-gray-400 space-y-1">
                                        <p><span x-text="data.bride.father"></span> ¬∑ <span
                                                x-text="data.bride.mother"></span>Ïùò <span
                                                x-text="data.bride.rank"></span></p>
                                    </div>
                                    <div class="flex justify-center gap-4 mt-6">
                                        <a :href="`tel:${data.bride.phone}`"
                                            class="w-10 h-10 flex items-center justify-center rounded-full border border-gray-100 text-gray-400 hover:text-rose-300 transition-colors shadow-sm bg-white">üìû</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </template>

                    <!-- Calendar Section -->
                    <template x-if="section.id === 'calendar'">
                        <div class="py-12">
                            <div
                                class="inline-block p-12 bg-white rounded-[3rem] border border-gray-100 shadow-2xl shadow-rose-100/30">
                                <p class="text-2xl font-bold mb-10 tracking-tight text-gray-700"
                                    x-text="getKSTMonthYear()"></p>

                                <div class="calendar-grid mb-12">
                                    <template x-for="day in ['Ïùº','Ïõî','Ìôî','Ïàò','Î™©','Í∏à','ÌÜ†']">
                                        <div class="text-[10px] font-bold py-2"
                                            :class="day === 'Ïùº' ? 'text-rose-400' : (day === 'ÌÜ†' ? 'text-sky-400' : 'text-gray-300')"
                                            x-text="day"></div>
                                    </template>

                                    <!-- Leading empty cells -->
                                    <template x-for="empty in getStartDayOfMonth()">
                                        <div class="day-cell"></div>
                                    </template>

                                    <!-- Actual days -->
                                    <template x-for="d in getDaysInMonth()">
                                        <div class="day-cell"
                                            :class="isWeddingDay(d) ? 'bg-rose-400 text-white font-bold scale-110 shadow-lg' : 'text-gray-600'"
                                            x-text="d"></div>
                                    </template>
                                </div>

                                <div class="pt-10 border-t border-gray-100 space-y-2">
                                    <p class="text-xs text-gray-300 tracking-widest uppercase">Wedding Countdown</p>
                                    <p class="text-rose-400 font-bold tracking-[0.2em] text-2xl"
                                        x-text="calculateDDayKST()"></p>
                                </div>
                            </div>
                        </div>
                    </template>

                    <!-- Location Section -->
                    <template x-if="section.id === 'location'">
                        <div class="py-12 space-y-10 text-left">
                            <div class="space-y-3">
                                <p class="text-xs text-rose-300 tracking-widest uppercase">The Venue</p>
                                <h3 class="text-2xl font-bold tracking-tight" x-text="data.venue.name"></h3>
                                <p class="text-sm text-gray-400" x-text="data.venue.address"></p>
                                <div class="flex gap-4 pt-2">
                                    <a :href="`tel:${data.venue.phone}`"
                                        class="text-xs text-gray-500 hover:text-rose-300 transition-colors">Tel. <span
                                            x-text="data.venue.phone"></span></a>
                                </div>
                            </div>
                            <!-- Mock Map -->
                            <div
                                class="aspect-video bg-gray-50 rounded-[2rem] flex items-center justify-center border border-gray-100 shadow-inner group cursor-pointer overflow-hidden relative">
                                <div
                                    class="absolute inset-0 bg-rose-50 opacity-0 group-hover:opacity-10 transition-opacity">
                                </div>
                                <div class="text-center space-y-2 z-10">
                                    <p class="text-[10px] text-gray-300 tracking-widest uppercase">Interactive Map</p>
                                    <p class="text-xs text-gray-400 italic">Click to open Navigation</p>
                                </div>
                            </div>
                        </div>
                    </template>

                    =======
                    <title x-data x-text="$store.weddingTitle || 'Î™®Î∞îÏùº Ï≤≠Ï≤©Ïû•'"></title>
                    <script src="https://cdn.tailwindcss.com"></script>
                    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
                    <link
                        href="https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&family=Nanum+Myeongjo:wght@400;700&family=Noto+Serif+KR:wght@300;400;700&display=swap"
                        rel="stylesheet">
                    <link rel="stylesheet"
                        href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
                    <script type="text/javascript"
                        src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=dacffa882aa3284870d06afa02bd5947&libraries=services&autoload=false"></script>
                    <style>
                        :root {
                            --accent: #f2aebc;
                            --text: #333;
                            --bg: #ffffff;
                        }

                        body {
                            font-family: 'Gowun Batang', serif;
                            color: var(--text);
                            background: var(--bg);
                            overflow-x: hidden;
                            scroll-behavior: smooth;
                        }

                        [x-cloak] {
                            display: none !important;
                        }

                        .lux-font {
                            font-family: 'Nanum Myeongjo', serif;
                        }

                        /* Particle Layer */
                        #effect-canvas {
                            position: fixed;
                            top: 0;
                            left: 0;
                            pointer-events: none;
                            z-index: 50;
                        }

                        /* Performance Optimized Transitions */
                        .section-fold-content {
                            display: grid;
                            grid-template-rows: 0fr;
                            transition: grid-template-rows 0.4s ease-out;
                            overflow: hidden;
                        }

                        .section-fold-content.open {
                            grid-template-rows: 1fr;
                        }

                        .section-fold-inner {
                            min-height: 0;
                        }

                        /* Calendar */
                        .cal-grid {
                            display: grid;
                            grid-template-columns: repeat(7, 1fr);
                            text-align: center;
                            border: 1px solid #eee;
                        }

                        .cal-cell {
                            aspect-ratio: 1/1;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 1.1rem;
                            border: 0.5px solid #f9f9f9;
                        }

                        .cal-header {
                            font-weight: bold;
                            padding: 10px 0;
                            background: #fdfdfd;
                            font-size: 0.9rem;
                        }

                        .cal-sat {
                            color: #3b82f6;
                        }

                        .cal-sun {
                            color: #ef4444;
                        }

                        .cal-wedding {
                            background: var(--accent);
                            color: white;
                            border-radius: 50%;
                            width: 36px;
                            height: 36px;
                            margin: auto;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-weight: bold;
                        }

                        /* Buttons & UI */
                        .btn-action {
                            border: 1px solid #eee;
                            padding: 12px 20px;
                            border-radius: 4px;
                            font-size: 0.9rem;
                            transition: 0.3s;
                            background: white;
                        }

                        .btn-action:hover {
                            border-color: var(--accent);
                            color: var(--accent);
                        }

                        .section-sep {
                            height: 1px;
                            background: linear-gradient(to right, transparent, #eee, transparent);
                            margin: 2rem 0;
                        }

                        .modal-dim {
                            position: fixed;
                            inset: 0;
                            background: rgba(0, 0, 0, 0.8);
                            z-index: 1000;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            backdrop-filter: blur(4px);
                        }
                    </style>
                    <link rel="stylesheet" href="/index.css">
                    </head>

                    <body x-data="weddingApp()" x-init="init()">

                        <canvas id="effect-canvas"></canvas>

                        <!-- BGM UI -->
                        <div class="fixed top-6 right-6 z-[200]">
                            <button @click="toggleBgm()"
                                class="w-12 h-12 bg-white/80 backdrop-blur rounded-full border border-gray-100 shadow-lg flex items-center justify-center text-xl">
                                <span x-text="bgmPlaying ? '‚è∏' : '‚ñ∂Ô∏è'"></span>
                            </button>
                            <audio id="bgm-player" loop
                                src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"></audio>
                        </div>

                        <!-- Hero Section (Unfoldable) -->
                        <section class="min-h-screen relative flex flex-col">
                            <div class="relative w-full h-[70vh] overflow-hidden">
                                <img :src="data.mainImage" class="w-full h-full object-cover">
                                <div class="absolute inset-0 flex flex-col p-12 text-white"
                                    :class="{'justify-start': data.overlayPos === 'top', 'justify-center items-center': data.overlayPos === 'middle', 'justify-end': data.overlayPos === 'bottom'}">
                                    <h1 class="lux-font italic text-6xl md:text-8xl drop-shadow-2xl"
                                        x-text="data.overlayText"></h1>
                                </div>
                            </div>
                            <div class="flex-1 bg-white py-16 px-8 text-center animate__animated animate__fadeInUp">
                                <pre class="text-xl md:text-2xl leading-relaxed whitespace-pre-wrap font-medium text-gray-700"
                                    x-text="data.mainMessage"></pre>
                            </div>
                        </section>

                        <!-- Dynamic Sections -->
                        <main class="max-w-3xl mx-auto px-6 pb-24">
                            <template x-for="section in sortedSections" :key="section.id">
                                <div x-show="section.isVisible" class="mb-4">
                                    <div class="section-sep"></div>
                                    <!-- Section Header -->
                                    <div @click="toggleFold(section)"
                                        class="flex justify-between items-center py-6 cursor-pointer group">
                                        <h2 class="text-2xl font-bold tracking-widest text-gray-800 group-hover:text-pink-400 transition-colors"
                                            x-text="section.title"></h2>
                                        <span class="text-xl text-gray-300"
                                            x-text="section.isFolded ? '‚ñº' : '‚ñ≤'"></span>
                                    </div>

                                    <div class="section-fold-content" :class="!section.isFolded ? 'open' : ''">
                                        <div class="section-fold-inner space-y-8 pb-10">

                                            <!-- 2. Names -->
                                            <template x-if="section.id === 'names'">
                                                <div
                                                    class="grid grid-cols-2 gap-8 text-center bg-pink-50/30 p-8 rounded-2xl">
                                                    <div class="space-y-4">
                                                        <p
                                                            class="text-xs text-pink-400 font-bold tracking-widest uppercase">
                                                            Groom</p>
                                                        <h3 class="text-3xl font-bold" x-text="data.groom.name"></h3>
                                                        <div class="text-sm text-gray-500 space-y-1">
                                                            <p x-text="`${data.groom.father} ¬∑ ${data.groom.mother}`">
                                                            </p>
                                                            <p class="italic" x-text="'Ïùò ' + data.groom.rank"></p>
                                                        </div>
                                                    </div>
                                                    <div class="space-y-4 border-l border-white">
                                                        <p
                                                            class="text-xs text-pink-400 font-bold tracking-widest uppercase">
                                                            Bride</p>
                                                        <h3 class="text-3xl font-bold" x-text="data.bride.name"></h3>
                                                        <div class="text-sm text-gray-500 space-y-1">
                                                            <p x-text="`${data.bride.father} ¬∑ ${data.bride.mother}`">
                                                            </p>
                                                            <p class="italic" x-text="'Ïùò ' + data.bride.rank"></p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </template>

                                            <!-- 3. Calendar -->
                                            <template x-if="section.id === 'calendar'">
                                                <div class="space-y-10">
                                                    <div class="bg-white border p-6 rounded-xl shadow-sm">
                                                        <h4 class="text-2xl font-bold text-center mb-6"
                                                            x-text="getCalTitle()"></h4>
                                                        <div class="cal-grid">
                                                            <template x-for="h in ['Ïùº','Ïõî','Ìôî','Ïàò','Î™©','Í∏à','ÌÜ†']">
                                                                <div class="cal-header"
                                                                    :class="h==='Ïùº'?'cal-sun':(h==='ÌÜ†'?'cal-sat':'')"
                                                                    x-text="h"></div>
                                                            </template>
                                                            <template x-for="e in getCalStartDay()">
                                                                <div></div>
                                                            </template>
                                                            <template x-for="d in getCalDays()">
                                                                <div class="cal-cell">
                                                                    <div :class="isWeddingDay(d) ? 'cal-wedding' : (getCalDayNum(d)===0 ? 'cal-sun' : (getCalDayNum(d)===6 ? 'cal-sat' : ''))"
                                                                        x-text="d"></div>
                                                                </div>
                                                            </template>
                                                        </div>
                                                        <div class="mt-10 text-center space-y-3">
                                                            <p
                                                                class="text-xs text-gray-400 font-bold tracking-[0.3em] uppercase">
                                                                Countdown</p>
                                                            <p class="text-3xl font-bold text-pink-500 font-mono"
                                                                x-text="timerText"></p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </template>

                                            <!-- 4. YouTube -->
                                            <template x-if="section.id === 'youtube'">
                                                <div class="relative aspect-video rounded-xl overflow-hidden shadow-lg group cursor-pointer"
                                                    @click="openYoutube()">
                                                    <img :src="`https://img.youtube.com/vi/${getYoutubeId()}/maxresdefault.jpg`"
                                                        class="w-full h-full object-cover">
                                                    <div
                                                        class="absolute inset-0 bg-black/30 flex items-center justify-center">
                                                        <div
                                                            class="w-20 h-20 bg-white/90 rounded-full flex items-center justify-center text-4xl group-hover:scale-110 transition-transform">
                                                            ‚ñ∂Ô∏è</div>
                                                    </div>
                                                </div>
                                            </template>

                                            <!-- 5. Gallery -->
                                            <template x-if="section.id === 'gallery'">
                                                <div class="space-y-6">
                                                    <div
                                                        class="relative aspect-[4/5] md:aspect-video rounded-2xl overflow-hidden shadow-xl">
                                                        <template x-for="(img, i) in data.gallery" :key="i">
                                                            <img :src="img"
                                                                class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000"
                                                                :class="galIdx === i ? 'opacity-100' : 'opacity-0'"
                                                                @click="openGallery(img)">
                                                        </template>
                                                        <div class="absolute inset-y-0 left-0 w-16 flex items-center justify-center text-white text-3xl cursor-pointer"
                                                            @click="galIdx = (galIdx - 1 + data.gallery.length) % data.gallery.length">
                                                            ‚ùÆ</div>
                                                        <div class="absolute inset-y-0 right-0 w-16 flex items-center justify-center text-white text-3xl cursor-pointer"
                                                            @click="galIdx = (galIdx + 1) % data.gallery.length">‚ùØ</div>
                                                    </div>
                                                    <div class="grid grid-cols-5 gap-2">
                                                        <template x-for="(img, i) in data.gallery" :key="i">
                                                            <div @click="galIdx = i"
                                                                class="aspect-square cursor-pointer border-2 transition-all rounded-md overflow-hidden"
                                                                :class="galIdx === i ? 'border-pink-300 scale-95' : 'border-transparent opacity-60'">
                                                                <img :src="img" class="w-full h-full object-cover">
                                                            </div>
                                                        </template>
                                                    </div>
                                                </div>
                                            </template>

                                            <!-- 6. Phone -->
                                            <template x-if="section.id === 'phone'">
                                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                    <div class="bg-gray-50 p-6 rounded-2xl space-y-4">
                                                        <p class="text-xs font-bold text-gray-400 uppercase">Ïã†ÎûëÏ∏° Ïó∞ÎùΩÏ≤ò</p>
                                                        <template x-for="p in getGroomPhones()">
                                                            <div
                                                                class="flex justify-between items-center bg-white p-4 rounded-xl border border-gray-100 shadow-sm">
                                                                <span class="font-bold text-sm" x-text="p.label"></span>
                                                                <a :href="`tel:${p.val}`"
                                                                    class="w-10 h-10 bg-green-50 text-green-600 rounded-full flex items-center justify-center text-xl">üìû</a>
                                                            </div>
                                                        </template>
                                                    </div>
                                                    <div class="bg-pink-50/30 p-6 rounded-2xl space-y-4">
                                                        <p class="text-xs font-bold text-pink-300 uppercase">Ïã†Î∂ÄÏ∏° Ïó∞ÎùΩÏ≤ò</p>
                                                        <template x-for="p in getBridePhones()">
                                                            <div
                                                                class="flex justify-between items-center bg-white p-4 rounded-xl border border-pink-50 shadow-sm">
                                                                <span class="font-bold text-sm" x-text="p.label"></span>
                                                                <a :href="`tel:${p.val}`"
                                                                    class="w-10 h-10 bg-pink-50 text-pink-600 rounded-full flex items-center justify-center text-xl">üìû</a>
                                                            </div>
                                                        </template>
                                                    </div>
                                                </div>
                                            </template>

                                            <!-- 7. Accounts -->
                                            <template x-if="section.id === 'accounts'">
                                                <div class="space-y-6">
                                                    <div class="bg-gray-50 p-6 rounded-2xl space-y-4">
                                                        <p class="text-xs font-bold text-gray-400 uppercase">Ïã†ÎûëÏ∏° Í≥ÑÏ¢åÎ≤àÌò∏
                                                        </p>
                                                        <template x-for="a in getGroomAccounts()">
                                                            <div
                                                                class="bg-white p-5 rounded-xl border border-gray-100 space-y-2">
                                                                <div class="flex justify-between text-sm">
                                                                    <span class="font-bold" x-text="a.label"></span>
                                                                    <span class="text-gray-400" x-text="a.bank"></span>
                                                                </div>
                                                                <div class="flex justify-between items-center">
                                                                    <span class="text-lg font-mono font-bold"
                                                                        x-text="a.val"></span>
                                                                    <button @click="copy(a.val)"
                                                                        class="text-[10px] bg-gray-100 px-3 py-1 rounded">Î≥µÏÇ¨</button>
                                                                </div>
                                                            </div>
                                                        </template>
                                                    </div>
                                                    <div class="bg-pink-50/30 p-6 rounded-2xl space-y-4">
                                                        <p class="text-xs font-bold text-pink-300 uppercase">Ïã†Î∂ÄÏ∏° Í≥ÑÏ¢åÎ≤àÌò∏
                                                        </p>
                                                        <template x-for="a in getBrideAccounts()">
                                                            <div
                                                                class="bg-white p-5 rounded-xl border border-pink-50 space-y-2">
                                                                <div class="flex justify-between text-sm">
                                                                    <span class="font-bold" x-text="a.label"></span>
                                                                    <span class="text-gray-400" x-text="a.bank"></span>
                                                                </div>
                                                                <div class="flex justify-between items-center">
                                                                    <span class="text-lg font-mono font-bold"
                                                                        x-text="a.val"></span>
                                                                    <button @click="copy(a.val)"
                                                                        class="text-[10px] bg-pink-50 px-3 py-1 rounded">Î≥µÏÇ¨</button>
                                                                </div>
                                                            </div>
                                                        </template>
                                                    </div>
                                                </div>
                                            </template>

                                            <!-- 8. Location -->
                                            <template x-if="section.id === 'location'">
                                                <div class="space-y-8">
                                                    <div class="text-center space-y-2">
                                                        <h3 class="text-3xl font-bold" x-text="data.venue.name"></h3>
                                                        <p class="text-gray-400" x-text="data.venue.address"></p>
                                                        <div class="flex justify-center gap-6 py-4">
                                                            <a :href="`tel:${data.venue.phone}`"
                                                                class="text-sm border-b">Ï†ÑÌôîÌïòÍ∏∞</a>
                                                            <a :href="data.venue.homepage" target="_blank"
                                                                class="text-sm border-b">ÌôàÌéòÏù¥ÏßÄ</a>
                                                        </div>
                                                    </div>
                                                    <div id="map" style="width:100%;height:300px;"
                                                        class="rounded-xl shadow-inner"></div>
                                                    <div class="flex justify-center gap-4">
                                                        <button @click="openExternalMap('naver')"
                                                            class="flex flex-col items-center gap-1">
                                                            <div
                                                                class="w-12 h-12 bg-[#03C75A] text-white rounded-xl flex items-center justify-center font-bold">
                                                                N</div>
                                                            <span class="text-[10px]">ÎÑ§Ïù¥Î≤Ñ</span>
                                                        </button>
                                                        <button @click="openExternalMap('kakao')"
                                                            class="flex flex-col items-center gap-1">
                                                            <div
                                                                class="w-12 h-12 bg-[#FEE500] text-black rounded-xl flex items-center justify-center font-bold">
                                                                K</div>
                                                            <span class="text-[10px]">Ïπ¥Ïπ¥Ïò§</span>
                                                        </button>
                                                        <button @click="openExternalMap('tmap')"
                                                            class="flex flex-col items-center gap-1">
                                                            <div
                                                                class="w-12 h-12 bg-[#E10000] text-white rounded-xl flex items-center justify-center font-bold">
                                                                T</div>
                                                            <span class="text-[10px]">Ìã∞Îßµ</span>
                                                        </button>
                                                    </div>
                                                    <div class="bg-gray-50 p-8 rounded-2xl">
                                                        <pre class="text-sm leading-loose whitespace-pre-wrap text-gray-600"
                                                            x-text="data.venue.guideText"></pre>
                                                    </div>
                                                </div>
                                            </template>

                                            <!-- 11. Guestbook -->
                                            <template x-if="section.id === 'guestbook'">
                                                <div class="space-y-6">
                                                    <template x-for="g in data.guestbook.slice(0, 3)">
                                                        <div
                                                            class="p-6 bg-white border border-gray-100 rounded-2xl shadow-sm relative">
                                                            <p class="text-xs font-bold text-pink-300 mb-2"
                                                                x-text="g.name"></p>
                                                            <p class="text-base text-gray-700 font-light"
                                                                x-text="g.content"></p>
                                                            <span
                                                                class="absolute top-6 right-6 text-[10px] text-gray-200"
                                                                x-text="g.date"></span>
                                                        </div>
                                                    </template>
                                                    <div class="grid grid-cols-2 gap-4">
                                                        <button @click="showGuestbookModal = true"
                                                            class="btn-action w-full font-bold">Î∞©Î™ÖÎ°ù ÏûëÏÑ±ÌïòÍ∏∞</button>
                                                        <button @click="showAllGuestbook = true"
                                                            class="btn-action w-full">Ï†ÑÏ≤¥ Î∞©Î™ÖÎ°ù Î≥¥Í∏∞</button>
                                                    </div>
                                                </div>
                                            </template>

                                            <!-- 12. RSVP -->
                                            <template x-if="section.id === 'rsvp'">
                                                <div class="bg-gray-50 p-8 rounded-3xl text-center space-y-8">
                                                    <p class="text-sm text-gray-500">Ï∂ïÌïòÏùò ÎßàÏùåÏúºÎ°ú Ï∞∏ÏÑù Ïó¨Î∂ÄÎ•º ÏïåÎ†§Ï£ºÏãúÎ©¥<br>ÏõêÌôúÌïú ÏòàÏãù Ï§ÄÎπÑÏóê
                                                        ÌÅ∞ ÎèÑÏõÄÏù¥ Îê©ÎãàÎã§.</p>
                                                    <button @click="showRsvpModal = true"
                                                        class="w-full py-5 bg-gray-800 text-white rounded-xl font-bold tracking-widest shadow-xl shadow-gray-200">Ï∞∏ÏÑù
                                                        Ïó¨Î∂Ä Ï†ÑÎã¨ÌïòÍ∏∞</button>
                                                </div>
                                            </template>

                                            <!-- 13. Share -->
                                            <template x-if="section.id === 'share'">
                                                <div class="flex justify-center gap-6 py-6">
                                                    <button @click="share('kakao')"
                                                        class="w-14 h-14 bg-[#FEE500] rounded-full flex items-center justify-center shadow-md">üí¨</button>
                                                    <button @click="share('facebook')"
                                                        class="w-14 h-14 bg-[#1877F2] text-white rounded-full flex items-center justify-center shadow-md text-2xl">f</button>
                                                    <button @click="share('x')"
                                                        class="w-14 h-14 bg-black text-white rounded-full flex items-center justify-center shadow-md text-xl">ùïè</button>
                                                    <button @click="copyLink()"
                                                        class="w-14 h-14 bg-gray-200 rounded-full flex items-center justify-center shadow-md">üîó</button>
                                                </div>
                                            </template>

                                        </div>
                                        >>>>>>> aa2d15f (first commit)
                                    </div>
                                </div>
                            </template>
                        </main>

                        <<<<<<< HEAD <footer
                            class="py-32 bg-gray-50/50 text-center border-t border-gray-100 relative overflow-hidden">
                            <div class="relative z-10">
                                <p class="text-[10px] text-gray-300 tracking-[0.6em] mb-6 uppercase">Eternal Love &
                                    Promise</p>
                                <p class="text-[10px] text-gray-300 font-light tracking-widest italic">COPYRIGHT(C) JOE
                                    ALL RIGHT RESERVED</p>
                                <div class="mt-12">
                                    <a href="admin.html"
                                        class="text-[9px] text-gray-200 hover:text-rose-300 transition-colors border border-gray-100 px-4 py-2 rounded-full bg-white">ADMIN
                                        TERMINAL</a>
                                </div>
                            </div>
                            </footer>

                            <script>
                                const LANG_LIST = {
                                    ko: { name: 'ÌïúÍµ≠Ïñ¥', flag: 'üá∞üá∑' },
                                    en: { name: 'English', flag: 'üá¨üáß' },
                                    jp: { name: 'Êó•Êú¨Ë™û', flag: 'üáØüáµ' },
                                    cn: { name: 'ÁÆÄ‰Ωì‰∏≠Êñá', flag: 'üá®üá≥' }
                                };

                                function weddingApp() {
                                    return {
                                        showIntro: true,
                                        bgmPlaying: false,
                                        audio: null,
                                        playPromise: null,
                                        currentLang: LANG_LIST.ko,
                                        languages: Object.values(LANG_LIST),
                                        data: {},
                                        sortedSections: [],

=======
    <footer class="py-24 text-center border-t border-gray-50 bg-gray-50/30">
        <p class="text-gray-300 tracking-[0.6em] text-xs font-bold uppercase mb-4">Forever & Ever</p>
        <p class="text-gray-300 text-[10px] font-light">Copyright(c) Joe All Right Reserved</p>
    </footer>

    <!-- Modals -->
    <!-- Youtube Modal -->
    <div x-show="showYoutube" x-transition.opacity class="modal-dim" @click="showYoutube = false">
        <div class="w-full max-w-4xl aspect-video px-4" @click.stop>
            <iframe :src="`https://www.youtube.com/embed/${getYoutubeId()}?autoplay=1`" class="w-full h-full rounded-2xl shadow-2xl" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>
    </div>

    <!-- Gallery Modal -->
    <div x-show="showGalModal" x-transition.opacity class="modal-dim" @click="showGalModal = false">
        <img :src="activeImg" class="max-w-[95%] max-h-[90vh] object-contain rounded-xl shadow-2xl animate__animated animate__zoomIn">
    </div>

    <!-- RSVP Modal -->
    <div x-show="showRsvpModal" x-transition class="modal-dim z-[2000]" @click="showRsvpModal = false">
        <div class="bg-white w-[90%] max-w-md p-10 rounded-3xl space-y-8" @click.stop>
            <h3 class="text-2xl font-bold text-center">Ï∞∏ÏÑù Ïó¨Î∂Ä Ï†ÑÎã¨</h3>
            <div class="flex gap-2">
                <button @click="rsvpSide = 'groom'" class="flex-1 py-3 rounded-lg border font-bold" :class="rsvpSide === 'groom' ? 'bg-blue-50 border-blue-200 text-blue-600' : 'bg-white'">Ïã†ÎûëÏ∏°</button>
                <button @click="rsvpSide = 'bride'" class="flex-1 py-3 rounded-lg border font-bold" :class="rsvpSide === 'bride' ? 'bg-pink-50 border-pink-200 text-pink-600' : 'bg-white'">Ïã†Î∂ÄÏ∏°</button>
            </div>
            <div class="space-y-4">
                <div class="flex gap-4">
                    <label class="flex-1 flex items-center justify-center border p-4 rounded-xl cursor-pointer" :class="rsvpForm.attend ? 'bg-gray-800 text-white' : ''">
                        <input type="radio" x-model="rsvpForm.attend" :value="true" class="hidden"> Ï∞∏ÏÑù
                    </label>
                    <label class="flex-1 flex items-center justify-center border p-4 rounded-xl cursor-pointer" :class="!rsvpForm.attend ? 'bg-gray-800 text-white' : ''">
                        <input type="radio" x-model="rsvpForm.attend" :value="false" class="hidden"> Î∂àÏ∞∏
                    </label>
                </div>
                <input type="text" x-model="rsvpForm.name" placeholder="ÏÑ±Ìï® ÏûÖÎ†•" class="w-full p-5 bg-gray-50 rounded-xl outline-none focus:ring-2 ring-pink-100">
                <input type="text" x-model="rsvpForm.phone" placeholder="010-0000-0000" class="w-full p-5 bg-gray-50 rounded-xl outline-none focus:ring-2 ring-pink-100">
                <template x-if="rsvpForm.attend">
                    <div class="space-y-4">
                        <div class="flex gap-4">
                            <label class="flex-1 flex items-center justify-center border p-4 rounded-xl cursor-pointer" :class="rsvpForm.meal ? 'bg-gray-800 text-white' : ''">
                                <input type="radio" x-model="rsvpForm.meal" :value="true" class="hidden"> ÏãùÏÇ¨ ÏòàÏ†ï
                            </label>
                            <label class="flex-1 flex items-center justify-center border p-4 rounded-xl cursor-pointer" :class="!rsvpForm.meal ? 'bg-gray-800 text-white' : ''">
                                <input type="radio" x-model="rsvpForm.meal" :value="false" class="hidden"> ÏãùÏÇ¨ ÎØ∏ÏòàÏ†ï
                            </label>
                        </div>
                        <div x-show="rsvpForm.meal" class="flex items-center gap-4">
                            <span class="text-sm">Î≥∏Ïù∏ Ìè¨Ìï®</span>
                            <input type="number" x-model="rsvpForm.plusOnes" class="w-20 p-4 border rounded-xl text-center">
                            <span class="text-sm">Î™Ö</span>
                        </div>
                    </div>
                </template>
            </div>
            <button @click="submitRsvp()" class="w-full py-5 bg-pink-400 text-white rounded-xl font-bold shadow-xl shadow-pink-100">Ï†ÑÎã¨ÌïòÍ∏∞</button>
        </div>
    </div>

    <!-- Guestbook Write Modal -->
    <div x-show="showGuestbookModal" x-transition class="modal-dim z-[2000]" @click="showGuestbookModal = false">
        <div class="bg-white w-[90%] max-w-md p-10 rounded-3xl space-y-6" @click.stop>
            <h3 class="text-2xl font-bold">Ï∂ïÎ≥µÏùò Î©îÏãúÏßÄ</h3>
            <input type="text" x-model="gbForm.name" placeholder="ÏÑ±Ìï®ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî." maxlength="20" class="w-full p-5 bg-gray-50 rounded-xl outline-none">
            <textarea x-model="gbForm.content" placeholder="ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî. (ÏµúÎåÄ 255Ïûê)" maxlength="255" rows="5" class="w-full p-5 bg-gray-50 rounded-xl outline-none resize-none"></textarea>
            <p class="text-[10px] text-gray-400">ÎπÑÎ∞©Ïù¥ÎÇò ÏöïÏÑ§ Îì± Î∂ÄÏ†ÅÏ†àÌïú ÎÇ¥Ïö©ÏùÄ Í¥ÄÎ¶¨ÏûêÏóê ÏùòÌï¥ ÏÇ≠Ï†úÎê† Ïàò ÏûàÏäµÎãàÎã§.</p>
            <button @click="submitGuestbook()" class="w-full py-5 bg-gray-800 text-white rounded-xl font-bold">ÏûëÏÑ±ÌïòÍ∏∞</button>
        </div>
    </div>

    <script>
        function weddingApp() {
            return {
                isLoaded: false,
                bgmPlaying: false,
                galIdx: 0,
                timerText: '',
                showYoutube: false,
                showGalModal: false,
                showRsvpModal: false,
                showGuestbookModal: false,
                showAllGuestbook: false,
                activeImg: '',
                rsvpSide: 'groom',
                rsvpForm: { attend: true, name: '', phone: '', meal: true, plusOnes: 1 },
                gbForm: { name: '', content: '' },
                data: {},
                sortedSections: [],

>>>>>>> aa2d15f (first commit)
                                        async init() {
                                            const saved = localStorage.getItem('wedding_v2_data');
                                            this.data = saved ? JSON.parse(saved) : this.getInitialState();
                                            this.sortedSections = [...this.data.sections].sort((a, b) => a.order - b.order);

<<<<<<< HEAD
                                            const observer = new IntersectionObserver((entries) => {
                                                entries.forEach(entry => {
                                                    if (entry.isIntersecting) entry.target.classList.add('active');
                                                });
                                            }, { threshold: 0.1 });

                                            this.$nextTick(() => {
                                                document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
                                                this.initCanvas();
                                            });

                                            this.setupAudio();
=======
                    window.dispatchEvent(new Event('alpine:init-done'));
                    document.title = `¬ß${this.data.groom.name}¬ß ‚ô• ¬ß${this.data.bride.name}¬ßÏùò Î™®Î∞îÏùº Ï≤≠Ï≤©Ïû•`;

                    this.initPetals();
                    this.initTimer();
                    this.initMap();
                    this.initReveal();

                    this.isLoaded = true;
                    setInterval(() => { this.galIdx = (this.galIdx + 1) % this.data.gallery.length; }, 5000);
>>>>>>> aa2d15f (first commit)
                                        },

                                        getInitialState() {
                                            return {
<<<<<<< HEAD
                                                mainImage: 'https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=2070',
                                                overlayText: 'Our Wedding',
                                                mainText: 'Î¥ÑÏùò Îî∞Ïä§Ìï®Ïù¥ Í∞ÄÎìùÌïú ÎÇ†,\nÏ†ÄÌù¨ Îëê ÏÇ¨ÎûåÏùò ÏÜåÏ§ëÌïú Ïó∞ÏùÑ Îß∫Í≥†Ïûê Ìï©ÎãàÎã§.\n\nÌï®Íªò ÏûêÎ¶¨Î•º ÎπõÎÇ¥Ï£ºÏãúÎ©¥\nÎçîÏóÜÎäî Í∏∞ÏÅ®ÏúºÎ°ú Í∞ÑÏßÅÌïòÍ≤†ÏäµÎãàÎã§.',
                                                groom: { name: 'Ï°∞ÌòÑÏö∞', father: 'Ï°∞Î≥µÎûò', mother: 'ÎÇòÏÑ†Ìù¨', rank: 'Ïû•ÎÇ®', phone: '010-3366-4848' },
                                                bride: { name: 'Î•òÌïòÏòÅ', father: 'Î•òÎØºÏÑù', mother: 'Í≥†Ïö∞Ìù¨', rank: 'Ïû•ÎÖÄ', phone: '010-6556-7525' },
                                                weddingDate: '2026-05-02T13:00:00',
                                                venue: { name: 'ÎßàÎ¶¨ÏïÑÏ•¨ Ïä§ÌÄòÏñ¥', address: 'ÏÑúÏö∏ÌäπÎ≥ÑÏãú Í∞ïÎÇ®Íµ¨ ÎèÑÏÇ∞ÎåÄÎ°ú 318', phone: '02-541-5007' },
                                                sections: [
                                                    { id: 'mainText', title: 'INVITATION', isVisible: true, isFolded: false, order: 0 },
                                                    { id: 'names', title: 'WHO WE ARE', isVisible: true, isFolded: false, order: 1 },
                                                    { id: 'calendar', title: 'SCHEDULE', isVisible: true, isFolded: false, order: 2 },
                                                    { id: 'location', title: 'LOCATION', isVisible: true, isFolded: false, order: 3 }
=======
                        mainImage: 'https://images.unsplash.com/photo-1511795409834-ef04bbd61622?q=80&w=2069',
                        overlayText: 'Wedding Invitation',
                        overlayPos: 'top',
                        mainMessage: 'Ï°∞ÌòÑÏö∞ Í∑∏Î¶¨Í≥† Î•òÌïòÏòÅ\n\n2026ÎÖÑ 05Ïõî 02Ïùº ÌÜ†ÏöîÏùº PM 13Ïãú 00Î∂Ñ\nÍ∞ïÎÇ® ÎßàÎ¶¨ÏïÑÏ•¨ Ïä§ÌÄòÏñ¥\n\nÏòÅÏõêÌûà Ìï®ÍªòÌï†\nÏÇ¨ÎûëÏùò ÎßπÏÑ∏\nÍ∞ôÏù¥ Ï∂ïÎ≥µÌï¥Ï£ºÏÑ∏Ïöî.',
                        weddingDate: '2026-05-02T13:00:00',
                        youtubeLink: 'https://youtu.be/UmdCDfXQ8wQ?si=IirtVYdyD2qBEybR',
                        groom: { name: 'Ï°∞ÌòÑÏö∞', father: 'Ï°∞Î≥µÎûò', mother: 'ÎÇòÏÑ†Ìù¨', rank: 'Ïû•ÎÇ®', phone: '010-3366-4848', accLabel: 'Ï°∞ÌòÑÏö∞', acc: '040-086067-01-014', bank: 'Í∏∞ÏóÖ' },
                        bride: { name: 'Î•òÌïòÏòÅ', father: 'Î•òÎØºÏÑù', mother: 'Í≥†Ïö∞Ìù¨', rank: 'Ïû•ÎÖÄ', phone: '010-6556-7525', accLabel: 'Î•òÌïòÏòÅ', acc: '926-54-7559-46', bank: 'Íµ≠ÎØº' },
                        groomParents: { fPhone: '010-9090-0824', mPhone: '010-9877-0824', fAcc: '109-08-072450', fBank: 'Ïö∞Î¶¨', mAcc: '110-587-170868', mBank: 'Ïã†Ìïú' },
                        brideParents: { fPhone: '010-5356-7558', mPhone: '010-9858-7551', fAcc: '302-5356-7558-41', fBank: 'ÎÜçÌòë', mAcc: '339-06-063092', mBank: 'Ïã†Ìïú' },
                        gallery: [
                            'https://images.unsplash.com/photo-1583939003579-730e3918a45a?w=1000',
                            'https://images.unsplash.com/photo-1519225421980-715cb0215aed?w=1000',
                            'https://images.unsplash.com/photo-1519741497674-611481863552?w=1000',
                            'https://images.unsplash.com/photo-1520854221256-17451cc331bf?w=1000',
                            'https://images.unsplash.com/photo-1511285560929-80b456fea0bc?w=1000',
                            'https://images.unsplash.com/photo-1510076857177-7470076d4098?w=1000'
                        ],
                        venue: {
                            name: 'ÎßàÎ¶¨ÏïÑÏ•¨ Ïä§ÌÄòÏñ¥',
                            address: 'ÏÑúÏö∏ÌäπÎ≥ÑÏãú Í∞ïÎÇ®Íµ¨ ÎèÑÏÇ∞ÎåÄÎ°ú 318 SBÌÉÄÏõå GÏ∏µ',
                            phone: '02-541-5007',
                            homepage: 'http://www.mariagesquare.com/',
                            guideText: 'ÏÖîÌãÄÏö¥Ìñâ\n7Ìò∏ÏÑ†, Î∂ÑÎãπÏÑ† Í∞ïÎÇ®Íµ¨Ï≤≠Ïó≠ 3Î≤àÏ∂úÍµ¨ ÏÖîÌãÄÎ≤ÑÏä§ Ïù¥Ïö©\n\nÏßÄÌïòÏ≤†\nÍ∞ïÎÇ®Íµ¨Ï≤≠Ïó≠ 3-1Î≤à Ï∂úÍµ¨ ÎèÑÎ≥¥ 600M'
                        },
                        sections: [
                            { id: 'names', title: 'WHO WE ARE', isVisible: true, isFolded: false, order: 1 },
                            { id: 'calendar', title: 'DATE', isVisible: true, isFolded: false, order: 2 },
                            { id: 'youtube', title: 'CINEMA', isVisible: true, isFolded: true, order: 3 },
                            { id: 'gallery', title: 'GALLERY', isVisible: true, isFolded: true, order: 4 },
                            { id: 'phone', title: 'CONTACT', isVisible: true, isFolded: true, order: 5 },
                            { id: 'accounts', title: 'GIFT', isVisible: true, isFolded: true, order: 6 },
                            { id: 'location', title: 'LOCATION', isVisible: true, isFolded: false, order: 7 },
                            { id: 'guestbook', title: 'GUESTBOOK', isVisible: true, isFolded: true, order: 8 },
                            { id: 'rsvp', title: 'RSVP', isVisible: true, isFolded: false, order: 9 },
                            { id: 'share', title: 'SHARE', isVisible: true, isFolded: true, order: 10 }
                        ],
                        guestbook: [
                            { name: 'Ï°∞ÌòÑÏö∞', content: 'Î∞©Î¨∏Ìï¥Ï£ºÏÖîÏÑú Í∞êÏÇ¨Ìï©ÎãàÎã§!', date: '2026.01.01' }
>>>>>>> aa2d15f (first commit)
                                                ]
                                            };
                                        },

<<<<<<< HEAD
                                        setupAudio() {
                                            this.audio = new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3');
                                            this.audio.loop = true;
                                            this.audio.preload = 'auto';
                                        },

                                        async toggleBgm() {
                                            if (!this.audio) this.setupAudio();

                                            try {
                                                if (this.bgmPlaying) {
                                                    // If we have an active play promise, wait for it before pausing
                                                    if (this.playPromise) await this.playPromise;
                                                    this.audio.pause();
                                                    this.bgmPlaying = false;
                                                } else {
                                                    this.playPromise = this.audio.play();
                                                    if (this.playPromise !== undefined) {
                                                        await this.playPromise;
                                                        this.bgmPlaying = true;
                                                        this.playPromise = null;
                                                    }
                                                }
                                            } catch (err) {
                                                console.warn("BGM state change was interrupted:", err.name);
                                                this.bgmPlaying = false;
                                            }
                                        },

                                        closeIntro() {
                                            this.showIntro = false;
                                            document.body.style.overflow = 'auto';
                                        },

                                        formatDateKST(iso) {
                                            const d = new Date(iso);
                                            return d.toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' });
                                        },

                                        getKSTMonthYear() {
                                            const d = new Date(this.data.weddingDate);
                                            return `${d.getFullYear()} / ${String(d.getMonth() + 1).padStart(2, '0')}`;
                                        },

                                        getStartDayOfMonth() {
                                            const d = new Date(this.data.weddingDate);
                                            // 1st day of the wedding month
                                            return new Date(d.getFullYear(), d.getMonth(), 1).getDay();
                                        },

                                        getDaysInMonth() {
                                            const d = new Date(this.data.weddingDate);
                                            return new Date(d.getFullYear(), d.getMonth() + 1, 0).getDate();
                                        },

                                        isWeddingDay(day) {
                                            return day === new Date(this.data.weddingDate).getDate();
                                        },

                                        calculateDDayKST() {
                                            const now = new Date();
                                            // Explicitly calculate Korea Standard Time
                                            const kstNow = new Date(now.toLocaleString("en-US", { timeZone: "Asia/Seoul" }));
                                            const target = new Date(this.data.weddingDate);
                                            const kstTarget = new Date(target.toLocaleString("en-US", { timeZone: "Asia/Seoul" }));

                                            // Midnight normalization for pure day count
                                            kstNow.setHours(0, 0, 0, 0);
                                            kstTarget.setHours(0, 0, 0, 0);

                                            const diff = kstTarget - kstNow;
                                            const days = Math.round(diff / (1000 * 60 * 60 * 24));

                                            if (days > 0) return `D-${days}`;
                                            if (days === 0) return 'D-DAY';
                                            return `D+${Math.abs(days)}`;
                                        },

                                        runTTS() {
                                            const synth = window.speechSynthesis;
                                            if (synth.speaking) { synth.cancel(); return; }
                                            const msg = new SpeechSynthesisUtterance(this.data.mainText);
                                            msg.lang = 'ko-KR';
                                            msg.pitch = 1.0;
                                            msg.rate = 0.95;
                                            synth.speak(msg);
                                        },

                                        initCanvas() {
                                            const canvas = document.getElementById('interactive-canvas');
                                            const ctx = canvas.getContext('2d');
                                            let particles = [];
                                            const resize = () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; };
                                            window.addEventListener('resize', resize);
                                            resize();

                                            class Particle {
                                                constructor(x, y) {
                                                    this.x = x; this.y = y;
                                                    this.size = Math.random() * 2 + 0.3;
                                                    this.speedX = Math.random() * 1.5 - 0.75;
                                                    this.speedY = Math.random() * 1.5 - 0.75;
                                                    this.opacity = 0.8;
                                                }
                                                update() { this.x += this.speedX; this.y += this.speedY; this.opacity -= 0.012; }
                                                draw() {
                                                    ctx.fillStyle = `rgba(212, 175, 55, ${this.opacity})`;
                                                    ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill();
                                                }
                                            }

                                            const animate = () => {
                                                ctx.clearRect(0, 0, canvas.width, canvas.height);
                                                particles = particles.filter(p => p.opacity > 0);
                                                particles.forEach(p => { p.update(); p.draw(); });
                                                requestAnimationFrame(animate);
                                            };
                                            animate();

                                            this.addParticle = (x, y) => { for (let i = 0; i < 4; i++) particles.push(new Particle(x, y)); };
                                        },

                                        handleMouseMove(e) { this.addParticle?.(e.clientX, e.clientY); },
                                        handleTouchMove(e) { if (e.touches[0]) this.addParticle?.(e.touches[0].clientX, e.touches[0].clientY); }
                                    }
                                }
                            </script>
                            =======
                            toggleBgm() {
                            const audio = document.getElementById('bgm-player');
                            if (this.bgmPlaying) audio.pause();
                            else audio.play();
                            this.bgmPlaying = !this.bgmPlaying;
                            },

                            toggleFold(section) {
                            section.isFolded = !section.isFolded;
                            },

                            initPetals() {
                            const canvas = document.getElementById('effect-canvas');
                            const ctx = canvas.getContext('2d');
                            let petals = [];
                            const resize = () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight;
                            };
                            window.addEventListener('resize', resize); resize();

                            class Petal {
                            constructor() {
                            this.x = Math.random() * canvas.width;
                            this.y = -20;
                            this.size = Math.random() * 8 + 4;
                            this.vX = Math.random() * 1.5 - 0.5;
                            this.vY = Math.random() * 1.5 + 1;
                            this.angle = Math.random() * 360;
                            this.vAngle = Math.random() * 1 - 0.5;
                            this.opacity = Math.random() * 0.4 + 0.3;
                            }
                            update() {
                            this.x += this.vX; this.y += this.vY; this.angle += this.vAngle;
                            if (this.y > canvas.height) this.y = -20;
                            }
                            draw() {
                            ctx.save();
                            ctx.translate(this.x, this.y);
                            ctx.rotate(this.angle * Math.PI / 180);
                            ctx.globalAlpha = this.opacity;
                            ctx.fillStyle = '#f2aebc';
                            ctx.beginPath();
                            ctx.ellipse(0, 0, this.size, this.size / 2, 0, 0, Math.PI * 2);
                            ctx.fill();
                            ctx.restore();
                            }
                            }

                            for(let i=0; i<30; i++) petals.push(new Petal()); const loop=()=> {
                                ctx.clearRect(0, 0, canvas.width, canvas.height);
                                petals.forEach(p => { p.update(); p.draw(); });
                                requestAnimationFrame(loop);
                                };
                                loop();
                                },

                                initTimer() {
                                const update = () => {
                                const now = new Date();
                                const kstNow = new Date(now.getTime() + (now.getTimezoneOffset() * 60000) + (9 *
                                3600000));
                                const target = new Date(this.data.weddingDate);
                                const kstTarget = new Date(target.getTime() + (target.getTimezoneOffset() * 60000) + (9
                                * 3600000));
                                const diff = kstTarget - kstNow;
                                const prefix = diff >= 0 ? 'D-' : 'D+';
                                const abs = Math.abs(diff);
                                const d = Math.floor(abs / 86400000);
                                const h = String(Math.floor((abs % 86400000) / 3600000)).padStart(2,'0');
                                const m = String(Math.floor((abs % 3600000) / 60000)).padStart(2,'0');
                                const s = String(Math.floor((abs % 60000) / 1000)).padStart(2,'0');
                                this.timerText = `${prefix}${d} ${h}:${m}:${s}`;
                                };
                                update(); setInterval(update, 1000);
                                },

                                initMap() {
                                const load = () => {
                                if (typeof kakao === 'undefined') return setTimeout(load, 200);
                                kakao.maps.load(() => {
                                const mapContainer = document.getElementById('map');
                                if (!mapContainer) return;
                                const mapOption = { center: new kakao.maps.LatLng(37.5218, 127.0374), level: 3 };
                                const map = new kakao.maps.Map(mapContainer, mapOption);
                                const geocoder = new kakao.maps.services.Geocoder();
                                geocoder.addressSearch(this.data.venue.address, (result, status) => {
                                if (status === kakao.maps.services.Status.OK) {
                                const coords = new kakao.maps.LatLng(result[0].y, result[0].x);
                                new kakao.maps.Marker({ map: map, position: coords });
                                map.setCenter(coords);
                                }
                                });
                                });
                                };
                                this.$nextTick(load);
                                },

                                initReveal() {
                                const obs = new IntersectionObserver(entries => {
                                entries.forEach(e => { if(e.isIntersecting) e.target.classList.add('active'); });
                                }, { threshold: 0.1 });
                                this.$nextTick(() => document.querySelectorAll('.reveal').forEach(el =>
                                obs.observe(el)));
                                },

                                getYoutubeId() {
                                const match =
                                this.data.youtubeLink.match(/(?:youtu\.be\/|youtube\.com\/(?:v\/|u\/\w\/|embed\/|watch\?v=))([^#\&\?]*)/);
                                return (match && match[1].length === 11) ? match[1] : '';
                                },
                                openYoutube() { this.showYoutube = true; },
                                openGallery(img) { this.activeImg = img; this.showGalModal = true; },
                                copy(txt) { navigator.clipboard.writeText(txt); alert('Í≥ÑÏ¢åÎ≤àÌò∏Í∞Ä Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§.'); },
                                copyLink() { navigator.clipboard.writeText(window.location.href); alert('ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Ï£ºÏÜåÍ∞Ä
                                Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§.'); },

                                getCalTitle() { const d = new Date(this.data.weddingDate); return `${d.getFullYear()} .
                                ${d.getMonth()+1}`; },
                                getCalStartDay() { const d = new Date(this.data.weddingDate); return new
                                Date(d.getFullYear(), d.getMonth(), 1).getDay(); },
                                getCalDays() { const d = new Date(this.data.weddingDate); return new
                                Date(d.getFullYear(), d.getMonth()+1, 0).getDate(); },
                                getCalDayNum(d) { const date = new Date(this.data.weddingDate); return new
                                Date(date.getFullYear(), date.getMonth(), d).getDay(); },
                                isWeddingDay(d) { return d === new Date(this.data.weddingDate).getDate(); },

                                getGroomPhones() {
                                let res = [{ label: this.data.groom.name, val: this.data.groom.phone }];
                                if(this.data.groomParents.fPhone) res.push({ label: 'ÏïÑÎ≤ÑÏßÄ ' + this.data.groom.father,
                                val: this.data.groomParents.fPhone });
                                if(this.data.groomParents.mPhone) res.push({ label: 'Ïñ¥Î®∏Îãà ' + this.data.groom.mother,
                                val: this.data.groomParents.mPhone });
                                return res;
                                },
                                getBridePhones() {
                                let res = [{ label: this.data.bride.name, val: this.data.bride.phone }];
                                if(this.data.brideParents.fPhone) res.push({ label: 'ÏïÑÎ≤ÑÏßÄ ' + this.data.bride.father,
                                val: this.data.brideParents.fPhone });
                                if(this.data.brideParents.mPhone) res.push({ label: 'Ïñ¥Î®∏Îãà ' + this.data.bride.mother,
                                val: this.data.brideParents.mPhone });
                                return res;
                                },
                                getGroomAccounts() {
                                let res = [{ label: this.data.groom.name, val: this.data.groom.acc, bank:
                                this.data.groom.bank }];
                                if(this.data.groomParents.fAcc) res.push({ label: 'ÏïÑÎ≤ÑÏßÄ ' + this.data.groom.father, val:
                                this.data.groomParents.fAcc, bank: this.data.groomParents.fBank });
                                if(this.data.groomParents.mAcc) res.push({ label: 'Ïñ¥Î®∏Îãà ' + this.data.groom.mother, val:
                                this.data.groomParents.mAcc, bank: this.data.groomParents.mBank });
                                return res;
                                },
                                getBrideAccounts() {
                                let res = [{ label: this.data.bride.name, val: this.data.bride.acc, bank:
                                this.data.bride.bank }];
                                if(this.data.brideParents.fAcc) res.push({ label: 'ÏïÑÎ≤ÑÏßÄ ' + this.data.bride.father, val:
                                this.data.brideParents.fAcc, bank: this.data.brideParents.fBank });
                                if(this.data.brideParents.mAcc) res.push({ label: 'Ïñ¥Î®∏Îãà ' + this.data.bride.mother, val:
                                this.data.brideParents.mAcc, bank: this.data.brideParents.mBank });
                                return res;
                                },

                                submitRsvp() {
                                if(!this.rsvpForm.name || !this.rsvpForm.phone) return alert('ÏÑ±Ìï®Í≥º Ïó∞ÎùΩÏ≤òÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                                const existing = JSON.parse(localStorage.getItem('rsvp_data') || '[]');
                                existing.push({ ...this.rsvpForm, side: this.rsvpSide, date: new Date().toLocaleString()
                                });
                                localStorage.setItem('rsvp_data', JSON.stringify(existing));
                                alert('Ï∞∏ÏÑù Ïó¨Î∂ÄÍ∞Ä Ï†ÑÎã¨ÎêòÏóàÏäµÎãàÎã§.');
                                this.showRsvpModal = false;
                                },

                                submitGuestbook() {
                                if(!this.gbForm.name || !this.gbForm.content) return alert('ÏÑ±Ìï®Í≥º ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                                this.data.guestbook.unshift({ name: this.gbForm.name, content: this.gbForm.content,
                                date: new Date().toLocaleDateString() });
                                localStorage.setItem('wedding_v2_data', JSON.stringify(this.data));
                                this.gbForm = { name: '', content: '' };
                                this.showGuestbookModal = false;
                                },

                                openExternalMap(type) {
                                const urls = {
                                naver: 'https://map.naver.com/p/entry/place/21413303',
                                kakao: 'https://map.kakao.com/?itemId=17416438',
                                tmap: 'https://poi.tmobiweb.com/app/share/position?poiId=2906804'
                                };
                                window.open(urls[type]);
                                }
                                };
                                }
                                </script>
                                <script type="module" src="/index.tsx"></script>
                                >>>>>>> aa2d15f (first commit)
                    </body>

</html>