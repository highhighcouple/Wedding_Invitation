
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title x-text="`${data.groom.name} ‚ô• ${data.bride.name}Ïùò Î™®Î∞îÏùº Ï≤≠Ï≤©Ïû•`"></title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Noto+Serif+KR:wght@200;400;700&family=Nanum+Myeongjo&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        :root { --main-bg: #ffffff; --text-color: #333333; }
        body { font-family: 'Noto Serif KR', serif; background-color: var(--main-bg); color: var(--text-color); overflow-x: hidden; }
        .font-cursive { font-family: 'Dancing Script', cursive; }
        [x-cloak] { display: none !important; }
        
        /* Interactive Background */
        #interactive-canvas { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 60; }
        
        /* Floating Animations */
        .reveal { opacity: 0; transform: translateY(30px); transition: all 1s ease-out; }
        .reveal.active { opacity: 1; transform: translateY(0); }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #ddd; border-radius: 10px; }

        /* Foldable Section */
        .section-content { max-height: 0; overflow: hidden; transition: max-height 0.5s cubic-bezier(0, 1, 0, 1); }
        .section-content.open { max-height: 2000px; transition: max-height 1s ease-in-out; }

        /* Intro Layer */
        .intro-layer { background: #fff; z-index: 1000; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        
        /* BGM Player Mini */
        .bgm-btn { width: 40px; height: 40px; border-radius: 50%; border: 1px solid #eee; display: flex; align-items: center; justify-content: center; background: white; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
    </style>
</head>
<body x-data="weddingApp()" x-init="init()" @mousemove="handleMouseMove($event)" @touchstart="handleTouchMove($event)">

    <canvas id="interactive-canvas"></canvas>

    <!-- Intro Layer -->
    <div x-show="showIntro" x-transition.opacity.duration.1000ms class="fixed inset-0 intro-layer cursor-pointer" @click="closeIntro()">
        <div class="text-center space-y-8 animate__animated animate__fadeIn">
            <h2 class="font-cursive text-4xl text-gray-400">Wedding Invitation</h2>
            <div class="flex flex-col items-center">
                <div class="w-px h-20 bg-gray-200 animate-bounce"></div>
                <p class="mt-4 text-[10px] tracking-[0.5em] text-gray-400 uppercase">Scroll to Open</p>
            </div>
        </div>
    </div>

    <!-- Header Menu -->
    <header class="fixed top-0 left-0 right-0 z-50 p-4 flex justify-between items-center pointer-events-none">
        <div class="flex items-center gap-2 pointer-events-auto">
            <button @click="toggleBgm()" class="bgm-btn">
                <span x-show="!bgmPlaying">‚ñ∂</span>
                <span x-show="bgmPlaying" class="animate-pulse">‚ô´</span>
            </button>
        </div>
        <div class="flex items-center gap-3 pointer-events-auto">
            <button @click="speakText()" class="text-xs text-gray-400 border border-gray-100 px-3 py-1 rounded-full bg-white/80 backdrop-blur">TTS</button>
            <div class="relative" x-data="{ open: false }">
                <button @click="open = !open" class="flex items-center gap-1 text-xs border border-gray-100 px-3 py-1 rounded-full bg-white/80 backdrop-blur">
                    <span x-text="currentLang.flag"></span> <span x-text="currentLang.name"></span>
                </button>
                <div x-show="open" @click.away="open = false" class="absolute right-0 mt-2 bg-white border border-gray-100 rounded-xl shadow-xl p-2 w-32 space-y-1">
                    <template x-for="lang in languages">
                        <button @click="changeLang(lang); open = false" class="w-full text-left px-3 py-2 text-[10px] hover:bg-gray-50 rounded-lg flex items-center gap-2">
                            <span x-text="lang.flag"></span> <span x-text="lang.name"></span>
                        </button>
                    </template>
                </div>
            </div>
        </div>
    </header>

    <!-- Background Effects -->
    <template x-if="data.effectStyle === 'PETAL'">
        <div class="fixed inset-0 pointer-events-none z-10 overflow-hidden">
            <template x-for="i in 20">
                <div class="absolute animate__animated animate__infinite animate__fadeOutDown" 
                     :style="`left: ${Math.random()*100}%; top: -5%; animation-duration: ${5 + Math.random()*10}s; animation-delay: ${Math.random()*5}s; opacity: 0.6; font-size: 20px;`">üå∏</div>
            </template>
        </div>
    </template>

    <!-- Main Content -->
    <main class="relative z-20">
        
        <!-- Section 1: Main Visual -->
        <section class="h-screen relative flex items-center justify-center overflow-hidden">
            <img :src="data.mainImage" class="absolute inset-0 w-full h-full object-cover transition-transform duration-[10s] scale-110" id="main-img">
            <div class="absolute inset-0 bg-white/10"></div>
            <div class="relative z-10 text-center space-y-6 px-10">
                <h1 class="font-cursive text-6xl md:text-8xl text-white drop-shadow-2xl reveal animate__animated animate__fadeInUp" x-text="data.overlayText"></h1>
                <div class="w-12 h-px bg-white/50 mx-auto reveal" style="transition-delay: 0.5s"></div>
            </div>
        </section>

        <!-- Dynamic Sections -->
        <template x-for="section in sortedSections" :key="section.id">
            <div x-show="section.isVisible" class="max-w-xl mx-auto py-20 px-6 text-center reveal">
                
                <!-- Section Header (Foldable) -->
                <div @click="section.isFolded = !section.isFolded" class="cursor-pointer group">
                    <h2 class="text-[10px] tracking-[0.4em] text-gray-300 uppercase mb-8 group-hover:text-gray-500 transition-colors" x-text="section.title"></h2>
                </div>

                <div class="section-content" :class="!section.isFolded ? 'open' : ''">
                    
                    <!-- 1.3 Main Text -->
                    <template x-if="section.id === 'mainText'">
                        <div class="py-10 space-y-6">
                            <pre class="whitespace-pre-wrap leading-relaxed text-gray-600 font-light text-lg md:text-xl" x-text="data.mainText"></pre>
                        </div>
                    </template>

                    <!-- 2. Names -->
                    <template x-if="section.id === 'names'">
                        <div class="py-10 space-y-12">
                            <div class="flex flex-col md:flex-row justify-center items-center gap-8">
                                <div class="space-y-2">
                                    <p class="text-xs text-gray-400">GROOM</p>
                                    <p class="text-2xl font-bold" x-text="data.groom.name"></p>
                                    <p class="text-xs text-gray-400">
                                        <span x-text="data.groom.father"></span> ¬∑ <span x-text="data.groom.mother"></span>Ïùò <span x-text="data.groom.rank"></span>
                                    </p>
                                </div>
                                <div class="text-rose-200 text-3xl">‚ô•</div>
                                <div class="space-y-2">
                                    <p class="text-xs text-gray-400">BRIDE</p>
                                    <p class="text-2xl font-bold" x-text="data.bride.name"></p>
                                    <p class="text-xs text-gray-400">
                                        <span x-text="data.bride.father"></span> ¬∑ <span x-text="data.bride.mother"></span>Ïùò <span x-text="data.bride.rank"></span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </template>

                    <!-- 3. Calendar -->
                    <template x-if="section.id === 'calendar'">
                        <div class="py-10">
                            <div class="inline-block p-10 bg-gray-50/50 rounded-3xl border border-gray-100 shadow-sm">
                                <p class="text-xl font-bold mb-8" x-text="formatWeddingMonth()"></p>
                                <div class="grid grid-cols-7 gap-2 text-center text-sm">
                                    <template x-for="day in ['Ïùº','Ïõî','Ìôî','Ïàò','Î™©','Í∏à','ÌÜ†']">
                                        <div :class="day === 'Ïùº' ? 'text-rose-400' : (day === 'ÌÜ†' ? 'text-sky-400' : 'text-gray-300')" x-text="day"></div>
                                    </template>
                                    <template x-for="empty in Array(new Date(data.weddingDate).getDay()).fill(0)"><div></div></template>
                                    <template x-for="d in daysInMonth()">
                                        <div class="w-10 h-10 flex items-center justify-center rounded-full"
                                             :class="d === new Date(data.weddingDate).getDate() ? 'bg-rose-400 text-white font-bold' : 'text-gray-600'"
                                             x-text="d"></div>
                                    </template>
                                </div>
                                <div class="mt-10 pt-6 border-t border-gray-200">
                                    <p class="text-rose-400 font-bold" x-text="dDay()"></p>
                                </div>
                            </div>
                        </div>
                    </template>

                    <!-- 5. Gallery -->
                    <template x-if="section.id === 'gallery'">
                        <div class="py-10 grid grid-cols-2 md:grid-cols-3 gap-2">
                            <template x-for="(img, idx) in data.galleryImages">
                                <div class="aspect-[3/4] overflow-hidden rounded-lg cursor-pointer" @click="openGallery(idx)">
                                    <img :src="img" class="w-full h-full object-cover hover:scale-105 transition-transform duration-500">
                                </div>
                            </template>
                        </div>
                    </template>

                    <!-- 8. Location -->
                    <template x-if="section.id === 'location'">
                        <div class="py-10 space-y-6 text-left">
                            <div class="space-y-2">
                                <p class="text-xl font-bold" x-text="data.venue.name"></p>
                                <p class="text-sm text-gray-500" x-text="data.venue.address"></p>
                                <a :href="`tel:${data.venue.phone}`" class="text-xs text-rose-400" x-text="data.venue.phone"></a>
                            </div>
                            <div class="aspect-video bg-gray-100 rounded-2xl overflow-hidden shadow-inner">
                                <!-- Kakao Map Simulation -->
                                <div class="w-full h-full flex items-center justify-center text-gray-400 text-xs italic">
                                    Map API Loading (Address: <span x-text="data.venue.address"></span>)
                                </div>
                            </div>
                            <pre class="text-xs leading-relaxed text-gray-500 bg-gray-50 p-6 rounded-2xl" x-text="data.venue.guideText"></pre>
                        </div>
                    </template>

                </div>
            </div>
        </template>

    </main>

    <footer class="py-20 bg-gray-50 text-center">
        <p class="text-[10px] text-gray-300 tracking-widest">COPYRIGHT(C) JOE ALL RIGHT RESERVED</p>
        <a href="admin.html" class="text-[10px] text-gray-200 mt-4 inline-block hover:text-gray-400">ADMINISTRATION</a>
    </footer>

    <script>
        // Internationalization Data
        const LANG_DATA = {
            ko: { name: 'ÌïúÍµ≠Ïñ¥', flag: 'üá∞üá∑' },
            en: { name: 'English', flag: 'üá¨üáßüá∫üá∏' },
            jp: { name: 'Êó•Êú¨Ë™û', flag: 'üáØüáµ' },
            cn: { name: 'ÁÆÄ‰Ωì‰∏≠Êñá', flag: 'üá®üá≥' },
            tw: { name: 'ÁπÅÈ´î‰∏≠Êñá', flag: 'üáπüáº' },
            fr: { name: 'Fran√ßais', flag: 'üá´üá∑' },
            de: { name: 'Deutsch', flag: 'üá©üá™' }
        };

        function weddingApp() {
            return {
                showIntro: true,
                bgmPlaying: false,
                audio: null,
                currentLang: LANG_DATA.ko,
                languages: Object.values(LANG_DATA),
                data: {},
                sortedSections: [],
                
                init() {
                    const savedData = localStorage.getItem('wedding_v2_data');
                    this.data = savedData ? JSON.parse(savedData) : this.getDefaultData();
                    this.sortedSections = [...this.data.sections].sort((a, b) => a.order - b.order);
                    
                    // Intersection Observer for Reveal
                    const observer = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) entry.target.classList.add('active');
                        });
                    }, { threshold: 0.1 });
                    
                    setTimeout(() => {
                        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
                        this.initCanvas();
                    }, 500);

                    // IP based Lang (Mock)
                    this.detectLanguage();
                },

                getDefaultData() {
                    return {
                        mainImage: 'https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=2070',
                        overlayText: 'Wedding Invitation',
                        mainText: 'Ï°∞ÌòÑÏö∞ Í∑∏Î¶¨Í≥† Î•òÌïòÏòÅ\n\n2026ÎÖÑ 05Ïõî 02Ïùº ÌÜ†ÏöîÏùº PM 13Ïãú 00Î∂Ñ\nÍ∞ïÎÇ® ÎßàÎ¶¨ÏïÑÏ•¨ Ïä§ÌÄòÏñ¥\n\nÏòÅÏõêÌûà Ìï®ÍªòÌï† ÏÇ¨ÎûëÏùò ÎßπÏÑ∏\nÍ∞ôÏù¥ Ï∂ïÎ≥µÌï¥Ï£ºÏÑ∏Ïöî.',
                        groom: { name: 'Ï°∞ÌòÑÏö∞', father: 'Ï°∞Î≥µÎûò', mother: 'ÎÇòÏÑ†Ìù¨', rank: 'Ïû•ÎÇ®', phone: '010-3366-4848' },
                        bride: { name: 'Î•òÌïòÏòÅ', father: 'Î•òÎØºÏÑù', mother: 'Í≥†Ïö∞Ìù¨', rank: 'Ïû•ÎÖÄ', phone: '010-6556-7525' },
                        weddingDate: '2026-05-02T13:00:00',
                        galleryImages: ['https://picsum.photos/800/1200?w=1', 'https://picsum.photos/800/1200?w=2', 'https://picsum.photos/800/1200?w=3'],
                        venue: { name: 'ÎßàÎ¶¨ÏïÑÏ•¨ Ïä§ÌÄòÏñ¥', address: 'ÏÑúÏö∏ÌäπÎ≥ÑÏãú Í∞ïÎÇ®Íµ¨ ÎèÑÏÇ∞ÎåÄÎ°ú 318', phone: '02-541-5007', guideText: 'ÏÖîÌãÄÏö¥Ìñâ: 7Ìò∏ÏÑ† Í∞ïÎÇ®Íµ¨Ï≤≠Ïó≠ 3Î≤àÏ∂úÍµ¨ ÏÉÅÏãúÏö¥Ìñâ' },
                        effectStyle: 'PETAL',
                        sections: [
                            { id: 'mainText', title: 'Ï¥àÎåÄÌï©ÎãàÎã§', isVisible: true, isFolded: false, order: 0 },
                            { id: 'names', title: 'ÏÜåÍ∞ú', isVisible: true, isFolded: false, order: 1 },
                            { id: 'calendar', title: 'ÏùºÏ†ï', isVisible: true, isFolded: false, order: 2 },
                            { id: 'gallery', title: 'Í∞§Îü¨Î¶¨', isVisible: true, isFolded: true, order: 3 },
                            { id: 'location', title: 'Ïò§ÏãúÎäî Í∏∏', isVisible: true, isFolded: false, order: 4 }
                        ]
                    };
                },

                closeIntro() {
                    this.showIntro = false;
                    document.body.style.overflow = 'auto';
                },

                formatWeddingMonth() {
                    const d = new Date(this.data.weddingDate);
                    return d.getFullYear() + '. ' + (d.getMonth() + 1);
                },

                daysInMonth() {
                    const d = new Date(this.data.weddingDate);
                    return new Date(d.getFullYear(), d.getMonth() + 1, 0).getDate();
                },

                dDay() {
                    const now = new Date();
                    const target = new Date(this.data.weddingDate);
                    const diff = target - now;
                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    return days >= 0 ? `D-${days}` : `D+${Math.abs(days)}`;
                },

                speakText() {
                    const synth = window.speechSynthesis;
                    const utter = new SpeechSynthesisUtterance(this.data.mainText);
                    utter.lang = 'ko-KR';
                    utter.pitch = 1.2;
                    synth.speak(utter);
                },

                toggleBgm() {
                    if (!this.audio) {
                        this.audio = new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3');
                        this.audio.loop = true;
                    }
                    this.bgmPlaying ? this.audio.pause() : this.audio.play();
                    this.bgmPlaying = !this.bgmPlaying;
                },

                detectLanguage() {
                    // Logic to detect by IP (Simulation)
                    this.currentLang = LANG_DATA.ko;
                },

                changeLang(lang) {
                    this.currentLang = lang;
                    // Trigger Google Translate API or manual mapping
                },

                initCanvas() {
                    const canvas = document.getElementById('interactive-canvas');
                    const ctx = canvas.getContext('2d');
                    let particles = [];
                    
                    const resize = () => {
                        canvas.width = window.innerWidth;
                        canvas.height = window.innerHeight;
                    };
                    window.addEventListener('resize', resize);
                    resize();

                    class Particle {
                        constructor(x, y) {
                            this.x = x; this.y = y;
                            this.size = Math.random() * 3 + 1;
                            this.speedX = Math.random() * 3 - 1.5;
                            this.speedY = Math.random() * 3 - 1.5;
                            this.opacity = 1;
                        }
                        update() {
                            this.x += this.speedX; this.y += this.speedY;
                            this.opacity -= 0.02;
                        }
                        draw() {
                            ctx.fillStyle = `rgba(255, 215, 0, ${this.opacity})`;
                            ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill();
                        }
                    }

                    const animate = () => {
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        particles = particles.filter(p => p.opacity > 0);
                        particles.forEach(p => { p.update(); p.draw(); });
                        requestAnimationFrame(animate);
                    };
                    animate();

                    this.addParticle = (x, y) => {
                        for(let i=0; i<5; i++) particles.push(new Particle(x, y));
                    };
                },

                handleMouseMove(e) { this.addParticle && this.addParticle(e.clientX, e.clientY); },
                handleTouchMove(e) { this.addParticle && this.addParticle(e.touches[0].clientX, e.touches[0].clientY); }
            }
        }
    </script>
</body>
</html>
