
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëª¨ë°”ì¼ ì²­ì²©ì¥</title>
    <!-- Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Noto+Serif+KR:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <script src="store.js"></script>
    <style>
        body { font-family: 'Noto Serif KR', serif; scroll-behavior: smooth; background-color: #fff; }
        .font-cursive { font-family: 'Dancing Script', cursive; }
        [x-cloak] { display: none !important; }
        .bg-gold { background-color: #d4af37; }
        .text-gold { color: #d4af37; }
        .petal { position: fixed; pointer-events: none; z-index: 50; }
        @keyframes fall {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react/": "https://esm.sh/react@^19.2.3/",
    "framer-motion": "https://esm.sh/framer-motion@^12.27.1"
  }
}
</script>
</head>
<body x-data="weddingApp()" x-cloak>

    <!-- Intro Overlay -->
    <div x-show="showIntro" x-transition.opacity.duration.1000ms 
         class="fixed inset-0 z-[100] bg-white flex flex-col items-center justify-center cursor-pointer"
         @click="showIntro = false">
        <div class="animate-bounce flex flex-col items-center">
            <div class="w-1 h-12 bg-gray-200 mb-4"></div>
            <p class="text-gray-400 text-xs tracking-widest uppercase">SCROLL TO OPEN</p>
        </div>
    </div>

    <!-- Particles -->
    <template x-for="i in 15">
        <div class="petal" 
             :style="`left: ${Math.random()*100}%; animation: fall ${10 + Math.random()*10}s linear infinite; animation-delay: ${Math.random()*10}s;`"
             x-text="'ğŸŒ¸'"></div>
    </template>

    <!-- Main Visual -->
    <section class="relative h-screen overflow-hidden flex flex-col items-center justify-center text-white">
        <div class="absolute inset-0">
            <img :src="data.mainImage" class="w-full h-full object-cover transition-transform duration-[10s] scale-110 hover:scale-100" />
            <div class="absolute inset-0 bg-black/20"></div>
        </div>
        <div class="relative z-10 text-center animate__animated animate__fadeInUp">
            <h1 class="font-cursive text-6xl md:text-8xl mb-4 drop-shadow-lg" x-text="data.overlayText"></h1>
            <div class="w-12 h-px bg-white/50 mx-auto my-6"></div>
        </div>
    </section>

    <!-- Content -->
    <div class="max-w-xl mx-auto px-6 py-20 text-center space-y-24">
        
        <!-- Main Message -->
        <section class="animate__animated animate__fadeIn">
            <pre class="whitespace-pre-wrap leading-relaxed text-gray-700 text-lg md:text-xl font-light" x-text="data.mainText"></pre>
        </section>

        <!-- Names Section -->
        <section x-show="isSectionVisible('names')" class="space-y-8">
            <div class="flex flex-col md:flex-row justify-center items-center gap-6">
                <div>
                    <span class="text-gray-400 text-xs block mb-1 uppercase tracking-widest">Groom</span>
                    <p class="text-2xl font-bold" x-text="data.groom.name"></p>
                    <p class="text-sm text-gray-400 mt-1"><span x-text="data.groom.father"></span> Â· <span x-text="data.groom.mother"></span>ì˜ <span x-text="data.groom.rank"></span></p>
                </div>
                <div class="text-rose-200 text-3xl">â™¥</div>
                <div>
                    <span class="text-gray-400 text-xs block mb-1 uppercase tracking-widest">Bride</span>
                    <p class="text-2xl font-bold" x-text="data.bride.name"></p>
                    <p class="text-sm text-gray-400 mt-1"><span x-text="data.bride.father"></span> Â· <span x-text="data.bride.mother"></span>ì˜ <span x-text="data.bride.rank"></span></p>
                </div>
            </div>
            <div class="flex justify-center gap-4">
                <a :href="`tel:${data.groom.phone}`" class="w-10 h-10 border border-gray-100 rounded-full flex items-center justify-center text-rose-300">ğŸ“</a>
                <a :href="`tel:${data.bride.phone}`" class="w-10 h-10 border border-gray-100 rounded-full flex items-center justify-center text-rose-300">ğŸ“</a>
            </div>
        </section>

        <!-- Calendar Section -->
        <section x-show="isSectionVisible('calendar')" class="py-10">
            <h2 class="text-sm tracking-[0.3em] text-gray-400 mb-10 uppercase">Save The Date</h2>
            <div class="inline-block p-8 border border-gray-50 rounded-3xl shadow-sm bg-gray-50/30">
                <p class="text-xl font-bold mb-6" x-text="formatWeddingMonth()"></p>
                <div class="grid grid-cols-7 gap-2 text-center text-sm">
                    <template x-for="day in ['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ']">
                        <div class="text-gray-300 py-2" x-text="day"></div>
                    </template>
                    <template x-for="empty in Array(new Date(data.weddingDate).getDay()).fill(0)">
                        <div></div>
                    </template>
                    <template x-for="d in daysInMonth()">
                        <div class="w-8 h-8 flex items-center justify-center rounded-full"
                             :class="d === new Date(data.weddingDate).getDate() ? 'bg-rose-100 text-rose-600 font-bold' : 'text-gray-600'"
                             x-text="d"></div>
                    </template>
                </div>
                <div class="mt-8 pt-6 border-t border-gray-100">
                    <p class="text-rose-500 font-bold" x-text="`ìš°ë¦¬ ê²°í˜¼ê¹Œì§€ ${dDay()}ì¼`"></p>
                </div>
            </div>
        </section>

        <!-- Gallery Section -->
        <section x-show="isSectionVisible('gallery')">
            <h2 class="text-sm tracking-[0.3em] text-gray-400 mb-10 uppercase">Gallery</h2>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-2">
                <template x-for="(img, index) in data.galleryImages" :key="index">
                    <div class="aspect-[3/4] overflow-hidden rounded-lg cursor-pointer" @click="selectedImg = img">
                        <img :src="img" class="w-full h-full object-cover hover:scale-105 transition-transform" />
                    </div>
                </template>
            </div>
        </section>

        <!-- Location Section -->
        <section x-show="isSectionVisible('location')" class="space-y-6">
            <h2 class="text-sm tracking-[0.3em] text-gray-400 mb-4 uppercase">Location</h2>
            <p class="text-xl font-bold" x-text="data.venue.name"></p>
            <p class="text-gray-500 text-sm" x-text="data.venue.address"></p>
            <div class="aspect-video bg-gray-100 rounded-2xl overflow-hidden shadow-inner flex items-center justify-center">
                <p class="text-gray-400 text-xs">ì§€ë„ ë°ì´í„° ì‹œë®¬ë ˆì´ì…˜ (Static Map API ì—°ë™ ê¶Œì¥)</p>
            </div>
            <div class="grid grid-cols-2 gap-2">
                <button class="py-3 bg-green-50 text-green-700 rounded-lg text-xs font-bold">ë„¤ì´ë²„ ì§€ë„</button>
                <button class="py-3 bg-yellow-50 text-yellow-800 rounded-lg text-xs font-bold">ì¹´ì¹´ì˜¤ ë§µ</button>
            </div>
            <p class="text-xs text-left bg-gray-50 p-4 rounded-xl text-gray-500 leading-relaxed" x-text="data.venue.guideText"></p>
        </section>

        <!-- RSVP Form -->
        <section x-show="isSectionVisible('rsvp')" class="bg-gray-50 p-8 rounded-3xl">
            <h2 class="text-lg font-bold mb-6">ì°¸ì„ ì˜ì‚¬ ì „ë‹¬í•˜ê¸°</h2>
            <form @submit.prevent="submitRSVP()" class="space-y-4">
                <div class="flex gap-2">
                    <button type="button" @click="rsvpForm.side = 'groom'" :class="rsvpForm.side === 'groom' ? 'bg-sky-100 text-sky-600' : 'bg-white text-gray-400'" class="flex-1 py-2 rounded-lg text-xs font-bold transition-all">ì‹ ë‘ì¸¡</button>
                    <button type="button" @click="rsvpForm.side = 'bride'" :class="rsvpForm.side === 'bride' ? 'bg-rose-100 text-rose-600' : 'bg-white text-gray-400'" class="flex-1 py-2 rounded-lg text-xs font-bold transition-all">ì‹ ë¶€ì¸¡</button>
                </div>
                <input type="text" x-model="rsvpForm.name" placeholder="ì„±í•¨" class="w-full p-3 rounded-xl border-none text-sm outline-none focus:ring-2 ring-rose-200" required>
                <input type="text" x-model="rsvpForm.phone" placeholder="ì—°ë½ì²˜" class="w-full p-3 rounded-xl border-none text-sm outline-none focus:ring-2 ring-rose-200">
                <button type="submit" class="w-full py-4 bg-gray-800 text-white rounded-xl text-sm font-bold shadow-lg">ì „ë‹¬í•˜ê¸°</button>
            </form>
        </section>

        <!-- Guestbook Section -->
        <section x-show="isSectionVisible('guestbook')" class="space-y-6">
            <h2 class="text-sm tracking-[0.3em] text-gray-400 mb-4 uppercase">Guestbook</h2>
            <div class="space-y-3">
                <template x-for="g in guestbook" :key="g.id">
                    <div class="p-4 bg-white border border-gray-100 rounded-xl text-left shadow-sm">
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-bold text-sm" x-text="g.name"></span>
                            <span class="text-[10px] text-gray-300" x-text="new Date(g.date).toLocaleDateString()"></span>
                        </div>
                        <p class="text-sm text-gray-600" x-text="g.content"></p>
                    </div>
                </template>
                <p x-show="guestbook.length === 0" class="text-gray-300 text-sm">ì²« ë²ˆì§¸ ë©”ì‹œì§€ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”.</p>
            </div>
            <button @click="showGuestbookModal = true" class="w-full py-4 border border-rose-100 text-rose-400 rounded-xl text-sm font-bold">ì¶•í•˜ ë©”ì‹œì§€ ì‘ì„±</button>
        </section>

    </div>

    <!-- Lightbox -->
    <div x-show="selectedImg" class="fixed inset-0 z-[200] bg-black flex items-center justify-center p-4" @click="selectedImg = null">
        <img :src="selectedImg" class="max-w-full max-h-full rounded shadow-2xl animate__animated animate__zoomIn">
    </div>

    <!-- Guestbook Modal -->
    <div x-show="showGuestbookModal" class="fixed inset-0 z-[200] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-sm rounded-3xl p-8 shadow-2xl animate__animated animate__fadeInUp">
            <h3 class="text-xl font-bold mb-6">ë°©ëª…ë¡ ì‘ì„±</h3>
            <div class="space-y-4">
                <input type="text" x-model="newEntry.name" placeholder="ì„±í•¨" class="w-full p-4 bg-gray-50 rounded-2xl outline-none">
                <textarea x-model="newEntry.content" placeholder="ì¶•í•˜ì˜ í•œë§ˆë””" class="w-full h-32 p-4 bg-gray-50 rounded-2xl outline-none resize-none"></textarea>
                <div class="flex gap-2">
                    <button @click="showGuestbookModal = false" class="flex-1 py-4 bg-gray-100 text-gray-500 rounded-2xl">ì·¨ì†Œ</button>
                    <button @click="submitGuestbook()" class="flex-1 py-4 bg-rose-400 text-white rounded-2xl font-bold">ë“±ë¡</button>
                </div>
            </div>
        </div>
    </div>

    <footer class="py-12 bg-gray-50 text-center">
        <p class="text-[10px] text-gray-300 tracking-widest uppercase">Â© 2026 PREMIUM WEDDING. ALL RIGHTS RESERVED.</p>
        <a href="admin.html" class="text-[10px] text-gray-200 mt-2 inline-block">ê´€ë¦¬ì ëª¨ë“œ</a>
    </footer>

    <script>
        function weddingApp() {
            return {
                data: WeddingStore.get(),
                showIntro: true,
                selectedImg: null,
                showGuestbookModal: false,
                guestbook: WeddingStore.getGuestbook(),
                newEntry: { name: '', content: '' },
                rsvpForm: { side: 'groom', name: '', phone: '' },
                
                init() {
                    // ë°ì´í„° ë™ê¸°í™”
                    window.addEventListener('storage', () => {
                        this.data = WeddingStore.get();
                        this.guestbook = WeddingStore.getGuestbook();
                    });
                },

                isSectionVisible(id) {
                    const sec = this.data.sections.find(s => s.id === id);
                    return sec ? sec.isVisible : false;
                },

                formatWeddingMonth() {
                    const d = new Date(this.data.weddingDate);
                    return `${d.getFullYear()}. ${String(d.getMonth()+1).padStart(2,'0')}`;
                },

                daysInMonth() {
                    const d = new Date(this.data.weddingDate);
                    return new Date(d.getFullYear(), d.getMonth() + 1, 0).getDate();
                },

                dDay() {
                    const diff = new Date(this.data.weddingDate) - new Date();
                    return Math.ceil(diff / (1000 * 60 * 60 * 24));
                },

                submitGuestbook() {
                    if(!this.newEntry.name || !this.newEntry.content) return alert('ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    const list = WeddingStore.getGuestbook();
                    list.unshift({ ...this.newEntry, id: Date.now(), date: new Date().toISOString() });
                    WeddingStore.saveGuestbook(list);
                    this.guestbook = list;
                    this.newEntry = { name: '', content: '' };
                    this.showGuestbookModal = false;
                    alert('ì¶•ë³µí•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.');
                },

                submitRSVP() {
                    const list = WeddingStore.getRSVP();
                    list.push({ ...this.rsvpForm, id: Date.now(), date: new Date().toISOString() });
                    WeddingStore.saveRSVP(list);
                    this.rsvpForm = { side: 'groom', name: '', phone: '' };
                    alert('ì°¸ì„ ì˜ì‚¬ê°€ ì „ë‹¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
                }
            }
        }
    </script>
</body>
</html>
